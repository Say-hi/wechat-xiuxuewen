{"version":3,"sources":["shopVideoPage/shopvideopages/video/video.js"],"names":["app","getApp","Page","data","labelIndex","page","playIndex","img","testImg","list","getVideo","that","wxrequest","url","getUrl","shopVideoList","cid","goodslabel","id","success","res","wx","hideLoading","status","setData","concat","lists","more","pre_page","length","setToast","content","desc","chooseLabel","e","currentTarget","dataset","index","playVideo","videoCount","upFormId","onShareAppMessage","title","info","share_title","imageUrl","share_imageUrl","path","gs","onLoad","onReady","onShow","onHide","onUnload","onReachBottom","onPullDownRefresh"],"mappings":";;AAAA;AACA,IAAMA,MAAMC,QAAZ;;AAEA;AACAC,KAAK;AACH;;;AAGAC,QAAM;AACJC,gBAAY,CADR;AAEJC,UAAM,CAFF;AAGJC,eAAW,CAAC,CAHR;AAIJC,SAAKP,IAAIG,IAAJ,CAASK,OAJV;AAKJC,UAAM;AALF,GAJH;AAWHC,UAXG,sBAWS;AACV,QAAIC,OAAO,IAAX;AACAX,QAAIY,SAAJ,CAAc;AACZC,WAAKb,IAAIc,MAAJ,GAAaC,aADN;AAEZZ,YAAM;AACJa,aAAKL,KAAKR,IAAL,CAAUc,UAAV,CAAqBN,KAAKR,IAAL,CAAUC,UAA/B,EAA2Cc,EAD5C;AAEJb,cAAM,EAAEM,KAAKR,IAAL,CAAUE;AAFd,OAFM;AAMZc,aANY,mBAMHC,GANG,EAME;AACZC,WAAGC,WAAH;AACA,YAAIF,IAAIjB,IAAJ,CAASoB,MAAT,KAAoB,GAAxB,EAA6B;AAC3BZ,eAAKa,OAAL,CAAa;AACXf,kBAAME,KAAKR,IAAL,CAAUM,IAAV,CAAegB,MAAf,CAAsBL,IAAIjB,IAAJ,CAASA,IAAT,CAAcuB,KAApC,CADK;AAEXC,kBAAMP,IAAIjB,IAAJ,CAASA,IAAT,CAAcyB,QAAd,GAAyBR,IAAIjB,IAAJ,CAASA,IAAT,CAAcuB,KAAd,CAAoBG,MAA7C,GAAsD,CAAtD,GAA0D;AAFrD,WAAb;AAID,SALD,MAKO;AACL7B,cAAI8B,QAAJ,CAAanB,IAAb,EAAmB,EAACoB,SAASX,IAAIjB,IAAJ,CAAS6B,IAAnB,EAAnB;AACD;AACF;AAhBW,KAAd;AAkBD,GA/BE;AAgCHC,aAhCG,uBAgCUC,CAhCV,EAgCa;AACd,SAAK/B,IAAL,CAAUE,IAAV,GAAiB,CAAjB;AACA,SAAKF,IAAL,CAAUM,IAAV,GAAiB,EAAjB;AACA,SAAKe,OAAL,CAAa;AACXlB,iBAAW,CAAC,CADD;AAEXF,kBAAY8B,EAAEC,aAAF,CAAgBC,OAAhB,CAAwBC;AAFzB,KAAb,EAGG,KAAK3B,QAHR;AAID,GAvCE;AAwCH4B,WAxCG,qBAwCQJ,CAxCR,EAwCW;AACZ,QAAIvB,OAAO,IAAX;AACAX,QAAIuC,UAAJ,CAAe,KAAKpC,IAAL,CAAUM,IAAV,CAAeyB,EAAEC,aAAF,CAAgBC,OAAhB,CAAwBC,KAAvC,EAA8CnB,EAA7D;AACAP,SAAKa,OAAL,CAAa;AACXlB,iBAAW4B,EAAEC,aAAF,CAAgBC,OAAhB,CAAwBC;AADxB,KAAb;AAGD,GA9CE;AA+CHG,UA/CG,oBA+CON,CA/CP,EA+CU;AACXlC,QAAIwC,QAAJ,CAAaN,CAAb;AACD,GAjDE;AAkDHO,mBAlDG,+BAkDkB;AACnB,QAAI9B,OAAO,IAAX;AACA,WAAO;AACL+B,mBAAU/B,KAAKR,IAAL,CAAUwC,IAAV,CAAeC,WAAf,IAA8B,mBAAxC,CADK;AAELC,sBAAalC,KAAKR,IAAL,CAAUwC,IAAV,CAAeG,cAAf,IAAiC,EAA9C,CAFK;AAGLC,gEAAwD/C,IAAIgD,EAAJ,CAAO,aAAP,EAAsB9B;AAHzE,KAAP;AAKD,GAzDE;;AA0DH;;;AAGA+B,QA7DG,oBA6DO;AACR,SAAKzB,OAAL,CAAa;AACXP,kBAAYjB,IAAIgD,EAAJ,CAAO,WAAP;AADD,KAAb,EAEG,KAAKtC,QAFR;AAGA;AACD,GAlEE;;;AAoEH;;;AAGAwC,SAvEG,qBAuEQ;AACT;AACD,GAzEE;;;AA2EH;;;AAGAC,QA9EG,oBA8EO;AACR;AACD,GAhFE;;;AAkFH;;;AAGAC,QArFG,oBAqFO;AACR;AACD,GAvFE;;;AAyFH;;;AAGAC,UA5FG,sBA4FS;AACV;AACD,GA9FE;AA+FHC,eA/FG,2BA+Fc;AACf,QAAI,KAAKnD,IAAL,CAAUwB,IAAV,GAAiB,CAArB,EAAwB,KAAKjB,QAAL,GAAxB,KACKV,IAAI8B,QAAJ,CAAa,IAAb,EAAmB,EAACC,SAAS,SAAV,EAAnB;AACN,GAlGE;;AAmGH;;;AAGAwB,mBAtGG,+BAsGkB;AACnB,SAAKpD,IAAL,CAAUE,IAAV,GAAiB,CAAjB;AACA,SAAKF,IAAL,CAAUM,IAAV,GAAiB,EAAjB;AACA,SAAKe,OAAL,CAAa;AACXlB,iBAAW,CAAC;AADD,KAAb;AAGA,SAAKI,QAAL;AACA;AACD;AA9GE,CAAL","file":"video.js","sourcesContent":["// 获取全局应用程序实例对象\nconst app = getApp()\n\n// 创建页面实例对象\nPage({\n  /**\n   * 页面的初始数据\n   */\n  data: {\n    labelIndex: 0,\n    page: 0,\n    playIndex: -1,\n    img: app.data.testImg,\n    list: []\n  },\n  getVideo () {\n    let that = this\n    app.wxrequest({\n      url: app.getUrl().shopVideoList,\n      data: {\n        cid: that.data.goodslabel[that.data.labelIndex].id,\n        page: ++that.data.page\n      },\n      success (res) {\n        wx.hideLoading()\n        if (res.data.status === 200) {\n          that.setData({\n            list: that.data.list.concat(res.data.data.lists),\n            more: res.data.data.pre_page > res.data.data.lists.length ? 0 : 1\n          })\n        } else {\n          app.setToast(that, {content: res.data.desc})\n        }\n      }\n    })\n  },\n  chooseLabel (e) {\n    this.data.page = 0\n    this.data.list = []\n    this.setData({\n      playIndex: -1,\n      labelIndex: e.currentTarget.dataset.index\n    }, this.getVideo)\n  },\n  playVideo (e) {\n    let that = this\n    app.videoCount(this.data.list[e.currentTarget.dataset.index].id)\n    that.setData({\n      playIndex: e.currentTarget.dataset.index\n    })\n  },\n  upFormId (e) {\n    app.upFormId(e)\n  },\n  onShareAppMessage () {\n    let that = this\n    return {\n      title: `${that.data.info.share_title || '邀请您入驻绣学问，成为优秀的纹绣人'}`,\n      imageUrl: `${that.data.info.share_imageUrl || ''}`,\n      path: `/enteringPage/pagestwelve/entering/entering?id=${app.gs('userInfoAll').id}`\n    }\n  },\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad () {\n    this.setData({\n      goodslabel: app.gs('shopLabel')\n    }, this.getVideo)\n    // TODO: onLoad\n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady () {\n    // TODO: onReady\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow () {\n    // TODO: onShow\n  },\n\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide () {\n    // TODO: onHide\n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload () {\n    // TODO: onUnload\n  },\n  onReachBottom () {\n    if (this.data.more > 0) this.getVideo()\n    else app.setToast(this, {content: '没有更多内容啦'})\n  },\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh () {\n    this.data.page = 0\n    this.data.list = []\n    this.setData({\n      playIndex: -1\n    })\n    this.getVideo()\n    // TODO: onPullDownRefresh\n  }\n})\n"]}