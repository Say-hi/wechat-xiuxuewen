{"version":3,"sources":["shopListPage/shoplistpages/detail/detail.js"],"names":["app","getApp","Page","data","num","labelIndex","specifi","t","chooses","id","goSubmit","wx","navigateTo","url","buy","e","setData","buyMask","noUse","numOperation","type","currentTarget","dataset","info","sku","stock","setToast","content","chooseSp","index","shopProduct","pid","that","wxrequest","getUrl","success","res","hideLoading","status","imgs","split","detail","desc","onShareAppMessage","title","gs","name","imageUrl","avatar","path","onLoad","options","onReady","onShow","onHide","onUnload","onPullDownRefresh"],"mappings":"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","file":"detail.js","sourcesContent":["// 获取全局应用程序实例对象\nconst app = getApp()\n\n// 创建页面实例对象\nPage({\n  /**\n   * 页面的初始数据\n   */\n  data: {\n    num: 1,\n    labelIndex: 0,\n    specifi: [\n      {\n        t: 'color',\n        chooses: [\n          {\n            t: '可可棕',\n            id: 1\n          },\n          {\n            t: '可可棕',\n            id: 1\n          },\n          {\n            t: 'adsf',\n            id: 1\n          },\n          {\n            t: 'adsf',\n            id: 1\n          },\n          {\n            t: 'adsf',\n            id: 1\n          },\n          {\n            t: 'adsf',\n            id: 1\n          },\n          {\n            t: 'adsf',\n            id: 1\n          },\n          {\n            t: 'adsf',\n            id: 1\n          },\n          {\n            t: 'adsf',\n            id: 1\n          },\n          {\n            t: 'adsf',\n            id: 1\n          },\n          {\n            t: 'adsf',\n            id: 1\n          },\n          {\n            t: 'adsf',\n            id: 1\n          }\n        ]\n      },\n      {\n        t: 'color',\n        chooses: [\n          {\n            t: 'adsf',\n            id: 1\n          },\n          {\n            t: 'adsf',\n            id: 1\n          },\n          {\n            t: 'adsf',\n            id: 1\n          },\n          {\n            t: 'adsf',\n            id: 1\n          }\n        ]\n      },\n      {\n        t: 'color',\n        chooses: [\n          {\n            t: 'adsf',\n            id: 1\n          },\n          {\n            t: 'adsf',\n            id: 1\n          },\n          {\n            t: 'adsf',\n            id: 1\n          },\n          {\n            t: 'adsf',\n            id: 1\n          }\n        ]\n      },\n      {\n        t: 'color',\n        chooses: [\n          {\n            t: 'adsf',\n            id: 1\n          },\n          {\n            t: 'adsf',\n            id: 1\n          },\n          {\n            t: 'adsf',\n            id: 1\n          },\n          {\n            t: 'adsf',\n            id: 1\n          }\n        ]\n      }\n    ]\n  },\n  goSubmit () {\n    wx.navigateTo({\n      url: '../submit/submit'\n    })\n  },\n  buy (e) {\n    this.setData({\n      buyMask: !this.data.buyMask\n    })\n  },\n  noUse () {\n    app.noUse()\n  },\n  numOperation (e) {\n    let type = e.currentTarget.dataset.type\n    if (type === 'add') {\n      if (this.data.num >= this.data.info.sku[this.data.labelIndex].stock) return app.setToast(this, {content: '已达库存上限'})\n      this.setData({\n        num: ++this.data.num\n      })\n    } else {\n      if (this.data.num <= 1) return\n      this.setData({\n        num: --this.data.num\n      })\n    }\n  },\n  // chooseSp (e) {\n  //   let that = this\n  //   let {oindex, index} = e.currentTarget.dataset\n  //   for (let v of that.data.specifi[oindex].chooses) {\n  //     v['choose'] = false\n  //   }\n  //   that.data.specifi[oindex].chooses[index]['choose'] = true\n  //   let setStr = `specifi[${oindex}]`\n  //   this.setData({\n  //     [setStr]: that.data.specifi[oindex]\n  //   })\n  // },\n  chooseSp (e) {\n    this.setData({\n      labelIndex: e.currentTarget.dataset.index\n    })\n  },\n  shopProduct (pid) {\n    let that = this\n    app.wxrequest({\n      url: app.getUrl().shopProduct,\n      data: {\n        pid\n      },\n      success (res) {\n        wx.hideLoading()\n        if (res.data.status === 200) {\n          res.data.data.imgs = res.data.data.imgs ? res.data.data.imgs.split(',') : []\n          res.data.data.detail = res.data.data.detail ? res.data.data.detail.split(',') : []\n          that.setData({\n            info: res.data.data\n          })\n        } else {\n          app.setToast(that, {content: res.data.desc})\n        }\n      }\n    })\n  },\n  onShareAppMessage () {\n    return {\n      title: `向您推荐店铺【${app.gs('shopInfoAll').name}】`,\n      imageUrl: `${app.gs('shopInfoAll').avatar || ''}`,\n      path: `/shopPage/shoppages/index/index?mid=${app.gs('shopInfoAll').id}`\n    }\n  },\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad (options) {\n    this.shopProduct(options.id)\n    // TODO: onLoad\n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady () {\n    // TODO: onReady\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow () {\n    // TODO: onShow\n  },\n\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide () {\n    // TODO: onHide\n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload () {\n    // TODO: onUnload\n  },\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh () {\n    // TODO: onPullDownRefresh\n  }\n})\n"]}