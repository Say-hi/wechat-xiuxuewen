{"version":3,"sources":["shopListPage/shoplistpages/list/list.js"],"names":["app","getApp","Page","data","labelIndex","page","list","img","testImg","chooseLabel","e","setData","goodslabel","currentTarget","dataset","index","getShopProduct","that","wxrequest","url","getUrl","shopProductList","mid","cid","id","success","res","wx","hideLoading","status","concat","lists","more","pre_page","length","setToast","content","desc","upFormId","onShareAppMessage","title","gs","name","imageUrl","avatar","path","onLoad","onReady","onShow","onHide","onUnload","onReachBottom","onPullDownRefresh"],"mappings":"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","file":"list.js","sourcesContent":["// 获取全局应用程序实例对象\nconst app = getApp()\n\n// 创建页面实例对象\nPage({\n  /**\n   * 页面的初始数据\n   */\n  data: {\n    labelIndex: 0,\n    page: 0,\n    list: [],\n    img: app.data.testImg\n  },\n  chooseLabel (e) {\n    this.data.page = 0\n    this.data.list = []\n    this.setData({\n      goodslabel: this.data.goodslabel,\n      labelIndex: e.currentTarget.dataset.index\n    }, this.getShopProduct)\n  },\n  getShopProduct () {\n    let that = this\n    app.wxrequest({\n      url: app.getUrl().shopProductList,\n      data: {\n        mid: 0,\n        page: ++that.data.page,\n        cid: that.data.goodslabel[that.data.labelIndex].id\n      },\n      success (res) {\n        wx.hideLoading()\n        if (res.data.status === 200) {\n          that.setData({\n            list: that.data.list.concat(res.data.data.lists),\n            more: res.data.data.pre_page > res.data.data.lists.length ? 0 : 1\n          })\n        } else {\n          app.setToast(that, {content: res.data.desc})\n        }\n      }\n    })\n  },\n  upFormId (e) {\n    app.upFormId(e)\n  },\n  onShareAppMessage () {\n    return {\n      title: `向您推荐店铺【${app.gs('shopInfoAll').name}】`,\n      imageUrl: `${app.gs('shopInfoAll').avatar || ''}`,\n      path: `/shopPage/shoppages/index/index?mid=${app.gs('shopInfoAll').id}`\n    }\n  },\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad () {\n    this.setData({\n      goodslabel: app.gs('shopLabel')\n    }, this.getShopProduct)\n    // TODO: onLoad\n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady () {\n    // TODO: onReady\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow () {\n    // TODO: onShow\n  },\n\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide () {\n    // TODO: onHide\n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload () {\n    // TODO: onUnload\n  },\n  onReachBottom () {\n    if (this.data.more > 0) this.getShopProduct()\n    else app.setToast(this, {content: '没有更多内容啦'})\n  },\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh () {\n    this.data.page = 0\n    this.data.list = []\n    this.getShopProduct()\n    // TODO: onPullDownRefresh\n  }\n})\n"]}