{"version":3,"sources":["shopPage/shoppages/index/index.js"],"names":["app","getApp","Page","data","img","testImg","labelIndex","inputValue","e","searchText","detail","value","getVideo","that","wxrequest","url","getUrl","shopVideoList","success","res","wx","hideLoading","stopPullDownRefresh","status","setData","list","lists","getCategory","setToast","content","desc","shopCategoryList","goodslabel","getShopProduct","su","name","search","shopProductList","mid","cid","id","goods","chooseLabel","currentTarget","dataset","index","length","title","unshift","noUse","playVideo","play","playIndex","onShareAppMessage","info","share_title","imageUrl","share_imageUrl","path","gs","onLoad","wxlogin","onReady","onShow","move","onHide","onUnload","onPullDownRefresh"],"mappings":"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","file":"index.js","sourcesContent":["// 获取全局应用程序实例对象\nconst app = getApp()\n\n// 创建页面实例对象\nPage({\n  /**\n   * 页面的初始数据\n   */\n  data: {\n    img: app.data.testImg,\n    labelIndex: 0\n  },\n  inputValue (e) {\n    this.data.searchText = e.detail.value\n  },\n  getVideo () {\n    let that = this\n    app.wxrequest({\n      url: app.getUrl().shopVideoList,\n      data: {},\n      success (res) {\n        wx.hideLoading()\n        wx.stopPullDownRefresh()\n        if (res.data.status === 200) {\n          that.setData({\n            list: res.data.data.lists\n          }, that.getCategory)\n        } else {\n          app.setToast(that, {content: res.data.desc})\n        }\n      }\n    })\n  },\n  getCategory () {\n    let that = this\n    app.wxrequest({\n      url: app.getUrl().shopCategoryList,\n      success (res) {\n        wx.hideLoading()\n        if (res.data.status === 200) {\n          that.setData({\n            goodslabel: res.data.data\n          }, that.getShopProduct)\n          app.su('shopLabel', res.data.data)\n        } else {\n          app.setToast(that, {content: res.data.desc})\n        }\n      }\n    })\n  },\n  getShopProduct () {\n    let that = this\n    if (this.data.goodslabel[this.data.labelIndex].name === '搜索') return this.search()\n    app.wxrequest({\n      url: app.getUrl().shopProductList,\n      data: {\n        mid: 0,\n        cid: that.data.goodslabel[that.data.labelIndex].id\n      },\n      success (res) {\n        wx.hideLoading()\n        if (res.data.status === 200) {\n          that.setData({\n            goods: res.data.data.lists\n          })\n        } else {\n          app.setToast(that, {content: res.data.desc})\n        }\n      }\n    })\n  },\n  chooseLabel (e) {\n    this.setData({\n      goodslabel: this.data.goodslabel,\n      labelIndex: e.currentTarget.dataset.index\n    }, this.getShopProduct)\n  },\n  search () {\n    let that = this\n    if (!this.data.searchText || this.data.searchText.length <= 0) return app.setToast(this, {content: '请输入搜索的内容'})\n    app.wxrequest({\n      url: app.getUrl().shopProductList,\n      data: {\n        mid: 0,\n        title: that.data.searchText\n      },\n      success (res) {\n        wx.hideLoading()\n        if (res.data.status === 200) {\n          if (that.data.goodslabel[0].name !== '搜索') {\n            that.data.goodslabel.unshift({\n              name: '搜索'\n            })\n          }\n          that.setData({\n            labelIndex: 0,\n            goodslabel: that.data.goodslabel,\n            goods: res.data.data.lists\n          })\n        } else {\n          app.setToast(that, {content: res.data.desc})\n        }\n      }\n    })\n  },\n  noUse () {\n    app.noUse()\n  },\n  playVideo (e) {\n    let that = this\n    this.setData({\n      play: !that.data.play,\n      playIndex: e.currentTarget.dataset.index\n    })\n  },\n  onShareAppMessage () {\n    let that = this\n    return {\n      title: `${that.data.info.share_title || '邀请您入驻绣学问，成为优秀的纹绣人'}`,\n      imageUrl: `${that.data.info.share_imageUrl || ''}`,\n      path: `/enteringPage/pagestwelve/entering/entering?id=${app.gs('userInfoAll').id}`\n    }\n  },\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad () {\n    if (!app.gs() || !app.gs('userInfoAll')) return app.wxlogin()\n    this.getVideo()\n    // TODO: onLoad\n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady () {\n    // TODO: onReady\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow () {\n    this.setData({\n      move: !this.data.move\n    })\n  },\n\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide () {\n    this.setData({\n      move: !this.data.move\n    })\n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload () {\n    // TODO: onUnload\n  },\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh () {\n    this.getVideo()\n  }\n})\n"]}