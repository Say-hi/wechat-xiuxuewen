{"version":3,"sources":["orderPage/pagesfive/order/order.js"],"names":["app","getApp","Page","data","testImg","currentIndex","currentIndexTwo","teamOrder","videoTab","t","onShareAppMessage","title","gs","path","imageUrl","g","chooseIndex","e","lists","page","currentTarget","dataset","type","setData","index","getData","that","wxrequest","url","getUrl","userActivePay","user_id","id","status","success","res","wx","hideLoading","v","create_time","momentFormat","concat","more","pre_page","length","setToast","content","desc","pay","orderId","payActiveAgain","order_id","openid","wxpay","Object","assign","msg","splice","navigateTo","out_trade_no","fail","orderOperation","userActiveChange","style","onReachBottom","showScroll","showS","userLogistic","order_num","logistic","express","onLoad","onReady","onShow","onHide","onUnload","onPullDownRefresh"],"mappings":"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","file":"order.js","sourcesContent":["// 获取全局应用程序实例对象\nconst app = getApp()\n\n// 创建页面实例对象\nPage({\n  /**\n   * 页面的初始数据\n   */\n  data: {\n    testImg: 'https://c.jiangwenqiang.com/api/logo.jpg',\n    currentIndex: 0,\n    currentIndexTwo: 0,\n    teamOrder: ['拼团中', '拼团成功', '拼团失败'],\n    videoTab: [\n      {\n        t: '待付款'\n      },\n      {\n        t: '待收货'\n      },\n      {\n        t: '已完成'\n      }\n    ]\n  },\n  onShareAppMessage () {\n    return {\n      title: app.gs('shareText').t || '绣学问，真纹绣',\n      path: `/pages/index/index`,\n      imageUrl: app.gs('shareText').g\n    }\n  },\n  chooseIndex (e) {\n    this.data.lists = []\n    this.data.page = 0\n    if (e.currentTarget.dataset.type === 'team') {\n      this.setData({\n        currentIndexTwo: e.currentTarget.dataset.index\n      })\n    } else {\n      this.setData({\n        currentIndex: e.currentTarget.dataset.index\n      }, this.getData)\n    }\n  },\n  getData () {\n    let that = this\n    app.wxrequest({\n      url: app.getUrl().userActivePay,\n      data: {\n        // user_id: 2,\n        user_id: app.gs('userInfoAll').id,\n        page: ++that.data.page,\n        status: that.data.currentIndex * 1 === 0 ? 0 : that.data.currentIndex * 1 === 1 ? 6 : 3\n      },\n      success (res) {\n        wx.hideLoading()\n        if (res.data.status === 200) {\n          for (let v of res.data.data.lists) {\n            v.create_time = app.momentFormat(v.create_time * 1000, 'MM月DD日 HH:mm')\n          }\n          that.setData({\n            lists: that.data.lists ? that.data.lists.concat(res.data.data.lists) : res.data.data.lists,\n            more: res.data.data.pre_page > res.data.data.lists.length ? 0 : 1\n          })\n        } else {\n          app.setToast(that, {content: res.data.desc})\n        }\n      }\n    })\n  },\n  pay (orderId, index) {\n    let that = this\n    app.wxrequest({\n      url: app.getUrl().payActiveAgain,\n      data: {\n        order_id: orderId,\n        openid: app.gs()\n      },\n      success (res) {\n        wx.hideLoading()\n        if (res.data.status === 200) {\n          app.wxpay(Object.assign(res.data.data.msg, {\n            success () {\n              that.data.lists.splice(index, 1)\n              that.setData({\n                lists: that.data.lists\n              })\n              wx.navigateTo({\n                url: `/offlinePage/pagesnine/offlineApply/offlineApply?trade=${that.data.lists[index].out_trade_no}&id=${that.data.lists[index].id}`\n              })\n            },\n            fail () {\n              app.setToast(that, {content: '未完成支付'})\n            }\n          }))\n        } else {\n          app.setToast(that, {content: res.data.desc})\n        }\n      }\n    })\n  },\n  orderOperation (e) {\n    if (e.currentTarget.dataset.type === 'pay') {\n      return this.pay(e.currentTarget.dataset.id, e.currentTarget.dataset.index)\n    }\n    let that = this\n    app.wxrequest({\n      url: app.getUrl().userActiveChange,\n      data: {\n        // user_id: 2,\n        user_id: app.gs('userInfoAll').id,\n        out_trade_no: that.data.lists[e.currentTarget.dataset.index].out_trade_no,\n        style: e.currentTarget.dataset.type === 'cancel' ? 1 : e.currentTarget.dataset.type === 'del' ? 2 : 3\n      },\n      success (res) {\n        wx.hideLoading()\n        if (res.data.status === 200) {\n          that.data.lists.splice(e.currentTarget.dataset.index, 1)\n          that.setData({\n            lists: that.data.lists\n          })\n        } else {\n          app.setToast(that, {content: res.data.desc})\n        }\n      }\n    })\n  },\n  onReachBottom () {\n    if (this.data.more > 0) this.getData()\n    else app.setToast(this, {content: '没有更多订单啦'})\n  },\n  showScroll (e) {\n    let that = this\n    if (e.currentTarget.dataset.type === 'check') {\n      that.setData({\n        showS: !that.data.showS\n      })\n    } else {\n      app.wxrequest({\n        url: app.getUrl().userLogistic,\n        data: {\n          out_trade_no: e.currentTarget.dataset.id,\n          order_num: e.currentTarget.dataset.logistic\n        },\n        success (res) {\n          wx.hideLoading()\n          if (res.data.status === 200) {\n            that.setData({\n              showS: !that.data.showS,\n              express: res.data.data.data\n            })\n          } else {\n            app.setToast(that, {content: res.data.desc})\n          }\n        }\n      })\n    }\n  },\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad () {\n    this.getData()\n    // TODO: onLoad\n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady () {\n    // TODO: onReady\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow () {\n    // TODO: onShow\n  },\n\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide () {\n    // TODO: onHide\n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload () {\n    // TODO: onUnload\n  },\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh () {\n    // TODO: onPullDownRefresh\n  }\n})\n"]}