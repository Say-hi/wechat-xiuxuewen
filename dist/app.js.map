{"version":3,"sources":["app.js"],"names":["useUrl","require","wxParse","statusBarHeight","wx","getSystemInfoSync","MenuButtonBounding","getMenuButtonBoundingClientRect","HEIGHT_TOP","bottom","Moment","cloud","updateLocale","relativeTime","future","past","s","m","mm","h","hh","d","dd","M","MM","y","yy","App","data","TOP_CENTER","right","searchText","bottomTabIndex","ALL_HEIGHT","name","label","testImg","reservation_bg","momentAdd","number","type","time","add","momentDay","day","momentFormat","formatStr","format","call","phoneNumber","makePhoneCall","WP","title","that","image","moment","fromNow","wxpay","obj","console","log","objs","timeStamp","nonceStr","package","signType","paySign","success","payRes","errMsg","fail","err","complete","requestPayment","downLoad","url","Promise","resolve","reject","downloadFile","res","statusCode","tempFilePath","wxUploadImg","cb","count","_that","chooseImage","showLoading","tempFilePaths","v","uploadFile","upImage","filePath","formData","id","gs","file","hideLoading","parseData","JSON","parse","wxUpload","header","setNav","navArr","currentPage","getCurrentPages","currentPath","length","replace","path","setBar","wxrequest","mask","request","login","method","stopPullDownRefresh","goOther","e","currentTarget","dataset","previewImage","urls","src","navigateTo","upFormId","getUrl","formid","openid","detail","formId","wxlogin","params","code","setStorageSync","userInfo","parent_id","nickname","nickName","avatar_url","avatarUrl","sex","gender","city","country","province","session","user_id","status","su","setData","is_teacher","is_teach","query","options","i","reLaunch","warn","getUserInfo","key","getStorageSync","setMore","more","withCredentials","lang","gu","inputValue","value","teacherText","nameText","phoneText","brandText","contentTwo","buddingText","content","contentOne","userNote","checkMobile","mobile","test","setToast","toast","defaultToast","show","bgc","color","Object","assign","setTimeout","showImg","imgArr","current","gn","redirectTo","text","setNavigationBarTitle","getLocation","reverseGeocoder","getFont","loadFontFace","family","source","loadFont","getNavTab","style","distance","lat1","lng1","lat2","lng2","lat","lng","R","dLat","Math","PI","dLng","a","sin","cos","c","atan2","sqrt","round","userCollect","is_collect","collect_id","obj_user_id","state","userCollectCancel","userCollectSub","getEnum","enum","getShareText","then","result","onLaunch","onShow","onPageNotFound","onHide"],"mappings":"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","file":"app.js","sourcesContent":["/*eslint-disable*/\nconst useUrl = require('./utils/service')\nconst wxParse = require('./wxParse/wxParse')\nconst statusBarHeight = wx.getSystemInfoSync().statusBarHeight\nconst MenuButtonBounding = wx.getMenuButtonBoundingClientRect()\nconst HEIGHT_TOP = MenuButtonBounding.bottom - statusBarHeight\nconst Moment = require('./utils/moment-min')\nconst cloud = require('./utils/cloud')\nMoment.updateLocale('en', {\n  relativeTime : {\n    future: '%s',\n    past: '%s前',\n    s:  '刚刚',\n    m:  '1分钟',\n    mm: '%d分钟',\n    h:  '1小时',\n    hh: '%d小时',\n    d:  '1天',\n    dd: '%d天',\n    M:  '1个月',\n    MM: '%d月',\n    y:  '1年',\n    yy: '%d年'\n  }\n})\nApp({\n  data: {\n    // TOP_CENTER: ((MenuButtonBounding.right - MenuButtonBounding.left) / 2 / 2) + MenuButtonBounding.left,\n    TOP_CENTER: (MenuButtonBounding.right - 66),\n    searchText: null,\n    bottomTabIndex: 0,\n    statusBarHeight,\n    HEIGHT_TOP,\n    MenuButtonBounding,\n    ALL_HEIGHT: statusBarHeight + HEIGHT_TOP,\n    name: '绣学问小程序',\n    label: [],\n    testImg: 'https://c.jiangwenqiang.com/api/logo.jpg',\n    reservation_bg: 'https://c.jiangwenqiang.com/workProject/payKnowledge/reservation_bg.png',\n  },\n  cloud () {\n    return cloud\n  },\n  momentAdd (number, type, time) {\n    if (time) {\n      return Moment(time).add(number, type)\n    } else {\n      return  Moment().add(number, type)\n    }\n  },\n  momentDay (time) {\n    return Moment().day(time)\n  },\n  momentFormat (time, formatStr) {\n    return Moment(time).format(formatStr)\n  },\n  call (phoneNumber = '13378692079') {\n    wx.makePhoneCall({\n      phoneNumber\n    })\n  },\n  // 富文本解析\n  WP (title, type, data, that, image) {\n    wxParse.wxParse(title, type, data, that, image)\n  },\n  // 解析时间\n  moment (time) {\n    return Moment(time).fromNow()\n  },\n  // 发起微信支付\n  wxpay (obj) {\n    console.log(obj)\n    let objs = {\n      timeStamp: obj.timeStamp,\n      nonceStr: obj.nonceStr,\n      package: obj.package,\n      signType: obj.signType || 'MD5',\n      paySign: obj.paySign,\n      success: function (payRes) {\n        if (obj.success) {\n          if (payRes.errMsg === 'requestPayment:ok') {\n            obj.success(payRes)\n          } else {\n            obj.fail(payRes)\n          }\n        } else {\n          console.log('未传入success回调函数', payRes)\n        }\n      },\n      fail: function (err) {\n        if (obj.fail) {\n          obj.fail(err)\n        } else {\n          console.log('未传入fail回调函数,err:', err.errMsg)\n        }\n      },\n      complete: obj.complete || function () {}\n    }\n    wx.requestPayment(objs)\n  },\n  // 下载内容获取临时路径\n  downLoad (url) {\n    return new Promise ((resolve, reject) => {\n      wx.downloadFile({\n        url,\n        success (res) {\n          if (res.statusCode === 200) {\n            resolve(res.tempFilePath)\n          } else {\n            resolve(0)\n          }\n        }\n      })\n    })\n  },\n  // 选择图片上传\n  wxUploadImg (cb, count = 1) {\n    let _that = this\n    wx.chooseImage({\n      count,\n      success (res) {\n        console.log(res)\n        wx.showLoading({\n          title: '图片上传中'\n        })\n        for (let v of res.tempFilePaths) {\n          wx.uploadFile({\n            url: useUrl.upImage,\n            filePath: v,\n            name: 'file',\n            formData: {\n              id: _that.gs('userInfoAll').id || 1,\n              file: v\n            },\n            success (res) {\n              console.log(res)\n              wx.hideLoading()\n              let parseData = JSON.parse(res.data)\n              console.log(parseData)\n            }\n          })\n        }\n      }\n    })\n  },\n  // 上传媒体文件\n  wxUpload (obj) {\n    let s = {\n      url: obj.url,\n      filePath: obj.filePath,\n      name: obj.name || 'file',\n      header: {\n        'content-type' : 'multipart/form-data'\n      },\n      formData: obj.formData,\n      success: obj.success || function (res) {\n        console.log('未传入成功回调函数', res)\n      },\n      fail: obj.fail || function (res) {\n        console.log('为传入失败回调函数', res)\n      },\n      complete: obj.complete || function () {}\n    }\n    wx.uploadFile(s)\n  },\n  setNav () {\n    let that = this\n    let navArr = this.gs('navArr')\n    let currentPage = getCurrentPages()\n    let currentPath = currentPage[currentPage.length - 1]['__route__'].replace('pages', '..')\n    for (let v of navArr) {\n      if (v.path === currentPath) {\n        v['active'] = true\n        that.setBar(v.title)\n        break\n      }\n    }\n    return navArr\n  },\n  // 请求数据\n  wxrequest (obj) {\n    // let that = this\n    wx.showLoading({\n      title: '请求数据中...',\n      mask: true\n    })\n    // console.log('obj', obj)\n    // if (!obj.data.iv) {\n    //   obj.data = Object.assign(obj.data, {session_key: that.gs()})\n    // }\n    wx.request({\n      url: obj.url || useUrl.login,\n      method: obj.method || 'POST',\n      data: obj.data || {},\n      header: {\n        'content-type': obj.header || 'application/x-www-form-urlencoded'\n      },\n      success: obj.success || function () {\n        console.log('未传入success回调函数')\n      },\n      fail: obj.fail || function (err) {\n        console.log('未传入fail回调函数,err:' + err.errMsg)\n      },\n      complete: obj.complete || function (res) {\n        console.log('url', obj.url)\n        console.log('complete', res)\n        wx.stopPullDownRefresh()\n      }\n    })\n  },\n  goOther (e) {\n    if (!e.currentTarget.dataset.url) {\n      wx.previewImage({\n        urls: [e.currentTarget.dataset.src]\n      })\n    }\n    wx.navigateTo({\n      url: e.currentTarget.dataset.url\n    })\n  },\n  upFormId (e) {\n    let that = this\n    this.wxrequest({\n      url: that.getUrl().formid,\n      data: {\n        openid: that.gs(),\n        formid: e.detail.formId\n      },\n      success () {\n        wx.hideLoading()\n      }\n    })\n  },\n  // 用户登陆\n  wxlogin (params) {\n    let that = this\n    wx.login({\n      success (res) {\n        let code = res.code\n        // 获取用户信息\n        let obj = {\n          success (data) {\n            wx.setStorageSync('userInfo', data.userInfo)\n            let objs = {\n              url: useUrl.login,\n              data: params ? {\n                parent_id: params,\n                code,\n                nickname: data.userInfo.nickName,\n                avatar_url: data.userInfo.avatarUrl,\n                sex: data.userInfo.gender,\n                city: data.userInfo.city,\n                country: data.userInfo.country,\n                province: data.userInfo.province\n              } : {\n                code,\n                nickname: data.userInfo.nickName,\n                avatar_url: data.userInfo.avatarUrl,\n                sex: data.userInfo.gender,\n                city: data.userInfo.city,\n                country: data.userInfo.country,\n                province: data.userInfo.province\n              },\n              success (session) {\n                console.log('session', session)\n                wx.hideLoading()\n                wx.setStorageSync('key', session.data.data.openid)\n                that.wxrequest({\n                  url: that.getUrl().userInfo,\n                  data: {\n                    user_id: session.data.data.id\n                  },\n                  success (res) {\n                    wx.hideLoading()\n                    if (res.data.status === 200) {\n                      that.su('userInfoAll', res.data.data)\n                      if (params) {\n                        getCurrentPages()[getCurrentPages().length - 1].setData({\n                          is_teacher: res.data.data.is_teach\n                        })\n                        return\n                      }\n                      let currentPage = getCurrentPages()\n                      let query = ''\n                      try {\n                        let s = currentPage[currentPage.length - 1].options\n                        for (let i in s) {\n                          query += `${i}=${s[i]}&`\n                        }\n                      } catch (err) {\n                        query = currentPage[currentPage.length - 1]['__displayReporter']['showOptions']['query']\n                      }\n                      console.log('query', query)\n                      wx.reLaunch({\n                        url: '/' + currentPage[currentPage.length - 1]['__route__'] + (query.length > 0 ? '?' + query : '')\n                      })\n                    }\n                  }\n                })\n              }\n            }\n            that.wxrequest(objs)\n          },\n          fail (err) {\n            console.warn('getUserInfo', err)\n            let objs = {\n              url: useUrl.login,\n              data: params ? {\n                code,\n                parent_id: params\n              } : {\n                code\n              },\n              success (session) {\n                console.log('session', session)\n                wx.hideLoading()\n                wx.setStorageSync('key', session.data.data.openid)\n                that.wxrequest({\n                  url: that.getUrl().userInfo,\n                  data: {\n                    user_id: session.data.data.id\n                  },\n                  success (res) {\n                    wx.hideLoading()\n                    if (res.data.status === 200) {\n                      that.su('userInfoAll', res.data.data)\n                      if (params) {\n                        getCurrentPages()[getCurrentPages().length - 1].setData({\n                          is_teacher: res.data.data.is_teach\n                        })\n                      }\n                    }\n                  }\n                })\n                if (params) return\n                let currentPage = getCurrentPages()\n                let query = ''\n                try {\n                  let s = currentPage[currentPage.length - 1].options\n                  for (let i in s) {\n                    query += `${i}=${s[i]}&`\n                  }\n                } catch (err) {\n                  query = currentPage[currentPage.length - 1]['__displayReporter']['showOptions']['query']\n                }\n                console.log('query', query)\n                wx.reLaunch({\n                  url: '/' + currentPage[currentPage.length - 1]['__route__'] + (query.length > 0 ? '?' + query : '')\n                })\n              }\n            }\n            that.wxrequest(objs)\n          }\n        }\n        that.getUserInfo(obj)\n      },\n      fail (err) {\n          console.warn('loginError' + err)\n        }\n    })\n  },\n  // 获取缓存session_key\n  gs (key) {\n    return wx.getStorageSync(key || 'key')\n  },\n  // 设置页面是否加载\n  setMore (params, that) {\n    if (params.length === 0) {\n      that.setData({\n        more: false\n      })\n    } else {\n      that.setData({\n        more: true\n      })\n    }\n  },\n  // 获取用户信息\n  getUserInfo (obj) {\n    wx.getUserInfo({\n      withCredentials: obj.withCredentials || true,\n      lang: obj.lang || 'zh_CN',\n      success: obj.success || function (res) {\n        console.log('getUserInfoSuccess', res)\n      },\n      fail: obj.fail || function (res) {\n        console.log('getUserInfoFail', res)\n      }\n    })\n  },\n  // 获取用户缓存信息\n  gu (cb) {\n    if(wx.getStorageSync('userInfo')) {\n      return wx.getStorageSync('userInfo')\n    } else {\n      let obj = {\n        success (res) {\n          // console.log(res)\n          wx.setStorageSync('userInfo', res.userInfo)\n          if (cb) {\n            cb()\n          }\n        }\n      }\n      return this.getUserInfo(obj)\n    }\n  },\n  // 设置用户的缓存信息\n  su (key, obj) {\n    wx.setStorageSync(key, obj)\n  },\n  // 输入内容\n  inputValue (e, that, cb) {\n    let value = e.detail.value\n    let type = e.currentTarget.dataset.type\n    if (type === 'teacher') {\n      that.setData({\n        teacherText: value\n      })\n    } else if (type === 'name') {\n      that.setData({\n        nameText: value // 姓名\n      })\n    } else if (type === 'phone') {\n      that.setData({\n        phoneText: value // 手机号码\n      })\n    } else if (type === 'brand') {\n      that.setData({\n        brandText: value // 品牌\n      })\n    } else if (type === 'contentTwo') {\n      that.setData({\n        contentTwo: value // 翻译\n      })\n    } else if (type === 'buddingText') {\n      that.setData({\n        buddingText: value // 我要配音\n      })\n    } else if (type === 'content') {\n      that.setData({\n        content: value\n      })\n    } else if (type === 'contentOne') {\n      that.setData({\n        contentOne: value\n      })\n    } else if (type === 'userNote') {\n      that.setData({\n        userNote: value\n      })\n    }\n  },\n  // 手机号码验证\n  checkMobile (mobile) {\n    if (!(/^1[3|4|5|7|8][0-9]\\d{8}$/.test(mobile))) {\n      return true\n    }\n  },\n  // 信息弹窗\n  setToast (that, toast, time) {\n    let defaultToast = {\n      image: 'https://teach-1258261086.cos.ap-guangzhou.myqcloud.com/image/admin/background/jiong.png',\n      show: true,\n      bgc: '#fff',\n      color: '#000',\n      content: '服务器开小差啦~~'\n    }\n    Object.assign(defaultToast, toast)\n    that.setData({\n      toast: defaultToast\n    })\n    setTimeout(() => {\n      defaultToast.show = false\n      that.setData({\n        toast: defaultToast\n      })\n    }, (time || 1500))\n  },\n  // 预览图片\n  showImg (src, imgArr) {\n    wx.previewImage({\n      current: src,\n      urls: imgArr\n    })\n  },\n  // 跳转方式判断\n  gn (url) {\n    if (getCurrentPages().length >= 5) {\n      wx.redirectTo({\n        url\n      })\n    } else {\n      wx.navigateTo({\n        url\n      })\n    }\n  },\n  // 设置顶部文字\n  setBar (text) {\n    wx.setNavigationBarTitle({\n      title: text\n    })\n  },\n  // 逆地址解析\n  getLocation (that, type, cb) {\n    this.reverseGeocoder(that, type, cb)\n  },\n  // 获取请求路劲\n  getUrl () {\n    return useUrl\n  },\n  getFont () {\n    let that = this\n    wx.loadFontFace({\n      family: 'jwq',\n      source: 'url(\"https://at.alicdn.com/t/font_718305_0nntgpn0yem.ttf\")',\n      success (res) {\n        console.log(res)\n        console.log(res.status) //  loaded\n      },\n      fail (res) {\n        that.loadFont()\n        console.log(res.status) //  error\n      }\n    })\n  },\n  // 获取小程序状态栏内容\n  getNavTab ({style = 1, cb = null}) {\n    let that = this\n    this.wxrequest({\n      url: that.getUrl().style,\n      data: {\n        style\n      },\n      success (res) {\n        wx.hideLoading()\n        if (res.data.status === 200) {\n          if (style === 1) {\n            that.su('bottomNav', res.data.data)\n          } else {\n            if (cb && typeof cb === 'function') {\n              cb (res)\n            }\n          }\n        } else {\n          console.log('err', res)\n        }\n      }\n    })\n  },\n  // 地址计算\n  distance (lat1, lng1, lat2, lng2) {\n    let lat = [lat1, lat2]\n    let lng = [lng1, lng2]\n    let R = 6378137\n    let dLat = (lat[1] - lat[0]) * Math.PI / 180\n    let dLng = (lng[1] - lng[0]) * Math.PI / 180\n    let a = Math.sin(dLat / 2) * Math.sin(dLat / 2) + Math.cos(lat[0] * Math.PI / 180) * Math.cos(lat[1] * Math.PI / 180) * Math.sin(dLng / 2) * Math.sin(dLng / 2)\n    let c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a))\n    let d = R * c\n    return Math.round(d)\n  },\n  userCollect (is_collect, collect_id, obj_user_id, state) {\n    let that = this\n    return new Promise (function (resolve, reject) {\n      that.wxrequest({\n        url: is_collect ? useUrl.userCollectCancel : useUrl.userCollectSub,\n        data: {\n          user_id: that.gs('userInfoAll').id,\n          obj_user_id,\n          collect_id,\n          state\n        },\n        success (res) {\n          wx.hideLoading()\n          if (res.data.status === 200) {\n            resolve(res)\n          } else {\n            reject(res)\n          }\n        },\n        fail (err) {\n          reject(err)\n        }\n      })\n    })\n  },\n  getEnum () {\n    let that = this\n    this.wxrequest({\n      url: that.getUrl().enum,\n      data: {},\n      success (res) {\n        if (res.data.status === 200) {\n          that.data.label = res.data.data.label\n        }\n      }\n    })\n  },\n  getShareText () {\n    let that = this\n    cloud.getShareText()\n      .then(res => {\n        that.su('shareText', res.result)\n      })\n    // wx.cloud.init({\n    //   traceUser: true\n    // })\n    // wx.cloud.callFunction({\n    //   name: 'getShareText',\n    //   data: {},\n    //   success (res) {\n    //     that.su('shareText', res.result)\n    //   },\n    //   fail (err) {\n    //     console.log(err)\n    //   }\n    // })\n  },\n  /**\n   * 生命周期函数--监听小程序初始化\n   * 当小程序初始化完成时，会触发 onLaunch（全局只触发一次）\n   */\n  onLaunch () {\n    this.getNavTab({})\n    this.getEnum()\n    setTimeout(() => {\n      this.getShareText()\n    }, 500)\n    // this.su('userInfoAll', {id:2, nickname: 'Edward2'})\n    // this.getFont()\n  },\n  /**\n   * 生命周期函数--监听小程序显示\n   * 当小程序启动，或从后台进入前台显示，会触发 onShow\n   */\n  onShow () {\n    // console.log(' ========== Application is showed ========== ')\n  },\n  onPageNotFound () {\n    wx.reLaunch({\n      url: '/pages/index/index'\n    })\n  },\n  /**\n   * 生命周期函数--监听小程序隐藏\n   * 当小程序从前台进入后台，会触发 onHide\n   */\n  onHide () {\n    this.su('first', 1)\n    // console.log(' ========== Application is hid ========== ')\n  }\n})\n"]}