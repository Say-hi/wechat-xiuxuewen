{"version":3,"sources":["shopRecordPage/shoppages/index/index.js"],"names":["app","getApp","Page","data","list","directArr","page","getList","that","wxrequest","url","getUrl","type","uid","gs","id","success","res","wx","hideLoading","stopPullDownRefresh","status","lists","v","momentFormat","create_time","setData","concat","more","pre_page","length","setToast","content","desc","onShareAppMessage","mid","title","t","path","imageUrl","g","name","avatar","onLoad","options","setBar","onReady","onShow","onHide","onUnload","onReachBottom","onPullDownRefresh"],"mappings":"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","file":"index.js","sourcesContent":["// 获取全局应用程序实例对象\nconst app = getApp()\n\n// 创建页面实例对象\nPage({\n  /**\n   * 页面的初始数据\n   */\n  data: {\n    list: [],\n    directArr: ['', '直属上级', '间接上级', '商店收入'],\n    page: 0\n  },\n  getList () {\n    let that = this\n    app.wxrequest({\n      url: app.getUrl()[that.data.type === 'withdraw' ? 'shopUserRecord' : 'shopUserInDetail'],\n      data: {\n        uid: app.gs('userInfoAll').id,\n        page: ++this.data.page\n      },\n      success (res) {\n        wx.hideLoading()\n        wx.stopPullDownRefresh()\n        if (res.data.status === 200) {\n          for (let v of res.data.data.lists) {\n            v['create_time'] = app.momentFormat(v.create_time * 1000, 'YYYY-MM-DD HH:mm:ss')\n          }\n          that.setData({\n            list: that.data.list.concat(res.data.data.lists),\n            more: res.data.data.pre_page > res.data.data.lists.length ? 0 : 1\n          })\n        } else {\n          app.setToast(that, {content: res.data.desc})\n        }\n      }\n    })\n  },\n  onShareAppMessage () {\n    if (!app.gs('shopInfo').mid) {\n      return {\n        title: app.gs('shareText').t || '绣学问，真纹绣',\n        path: `/pages/index/index`,\n        imageUrl: app.gs('shareText').g\n      }\n    } else {\n      return {\n        title: `向您推荐店铺【${app.gs('shopInfoAll').name}】`,\n        imageUrl: `${app.gs('shopInfoAll').avatar || ''}`,\n        path: `/shopPage/shoppages/index/index?mid=${app.gs('shopInfoAll').id}`\n      }\n    }\n  },\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad (options) {\n    this.setData({\n      type: options.type\n    }, this.getList)\n    app.setBar(options.type === 'withdraw' ? '提现记录' : '收益明细')\n    // TODO: onLoad\n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady () {\n    // TODO: onReady\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow () {\n    // TODO: onShow\n  },\n\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide () {\n    // TODO: onHide\n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload () {\n    // TODO: onUnload\n  },\n  onReachBottom () {\n    if (this.data.more > 0) this.getList()\n    else app.setToast(this, {content: '没有更多内容啦'})\n  },\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh () {\n    this.data.page = 0\n    this.data.list = []\n    this.getList()\n    // TODO: onPullDownRefresh\n  }\n})\n"]}