{"version":3,"sources":["storePage/pagesstore/index/index.js"],"names":["app","getApp","Page","data","tabNav","t","url","img","testImg","upFormId","e","getRoomInfo","that","wxrequest","getUrl","teacherDotDetail","user_id","gs","id","success","res","wx","hideLoading","status","su","hasShop","setToast","content","desc","tabO","navigateTo","currentTarget","dataset","getMsg","teacherActiveMsg","num","v","create_time","moment","setData","MSG","getInfo","userInfo","onLoad","options","setBar","onReady","onShow","move","onHide","onUnload","onPullDownRefresh"],"mappings":"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","file":"index.js","sourcesContent":["// 获取全局应用程序实例对象\nconst app = getApp()\n// 创建页面实例对象\nPage({\n  /**\n   * 页面的初始数据\n   */\n  data: {\n    tabNav: [\n      {\n        t: '发布课程',\n        url: '../releasePage/releaseCourse/releaseCourse',\n        img: 'https://teach-1258261086.cos.ap-guangzhou.myqcloud.com/image/admin/storeSide/index_1.png'\n      },\n      {\n        t: '我的课程',\n        url: '../coursePage/course/course',\n        img: 'https://teach-1258261086.cos.ap-guangzhou.myqcloud.com/image/admin/storeSide/index_2.png'\n      },\n      {\n        t: '分享有奖',\n        url: '/sharePage/pagesshare/share/share',\n        img: 'https://teach-1258261086.cos.ap-guangzhou.myqcloud.com/image/admin/storeSide/index_3.png'\n      }\n    ],\n    testImg: app.data.testImg\n  },\n  upFormId (e) {\n    app.upFormId(e)\n  },\n  getRoomInfo () {\n    let that = this\n    app.wxrequest({\n      url: app.getUrl().teacherDotDetail,\n      data: {\n        user_id: app.gs('userInfoAll').id\n      },\n      success (res) {\n        wx.hideLoading()\n        if (res.data.status === 200) {\n          app.su('roomInfo', res.data.data)\n          if (res.data.data) {\n            that.data.hasShop = 1\n          } else {\n            that.data.hasShop = 0\n          }\n        } else {\n          app.setToast(that, {content: res.data.desc})\n        }\n      }\n    })\n  },\n  tabO (e) {\n    if (this.data.hasShop === 0) return app.setToast(this, {content: '请先设置您的教室信息'})\n    else {\n      wx.navigateTo({\n        url: e.currentTarget.dataset.url\n      })\n    }\n  },\n  getMsg () {\n    let that = this\n    app.wxrequest({\n      url: app.getUrl().teacherActiveMsg,\n      data: {\n        user_id: app.gs('userInfoAll').id,\n        num: 3\n      },\n      success (res) {\n        wx.hideLoading()\n        if (res.data.status === 200) {\n          for (let v of res.data.data) {\n            v.create_time = app.moment(v.create_time * 1000)\n          }\n          that.setData({\n            MSG: res.data.data\n          })\n        } else {\n          app.setToast(that, {content: res.data.desc})\n        }\n      }\n    })\n  },\n  getInfo () {\n    let that = this\n    app.wxrequest({\n      url: app.getUrl().userInfo,\n      data: {\n        user_id: app.gs('userInfoAll').id\n      },\n      success (res) {\n        wx.hideLoading()\n        if (res.data.status === 200) {\n          app.su('userInfoAll', res.data.data)\n        } else {\n          app.setToast(that, {content: res.data.desc})\n        }\n      }\n    })\n  },\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad (options) {\n    app.setBar('首页')\n    this.getInfo()\n  },\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady () {\n    // console.log(' ---------- onReady ----------')\n  },\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow () {\n    this.getRoomInfo()\n    this.getMsg()\n    this.setData({\n      move: !this.data.move\n    })\n    // console.log(' ---------- onShow ----------')\n  },\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide () {\n    this.setData({\n      move: !this.data.move\n    })\n    // console.log(' ---------- onHide ----------')\n  },\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload () {\n\n    // console.log(' ---------- onUnload ----------')\n  },\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh () {\n    this.getRoomInfo()\n    this.getInfo()\n  }\n})\n"]}