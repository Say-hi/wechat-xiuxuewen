{"version":3,"sources":["storePage/pagesstore/releasePage/releaseCourse/releaseCourse.js"],"names":["app","getApp","COS","require","config","cos","getAuthorization","params","callback","authorization","SecretId","SecretKey","Method","Key","Page","data","courseArr","labelArr","label","courseIndex","labelIndex","videoUrl","upImgArr","upImgArrProgress","upImgArr2","upImgArrProgress2","upImgArr3","upImgArrProgress3","upImgArr4","upImgArrProgress4","startDay","momentFormat","Date","startDay2","momentAdd","endDay","endDayShould","inputValue","e","chooseF","currentTarget","dataset","type","id","setToast","content","index","gs","is_teach","setData","upVideo","upText","that","speed","start","getTime","wx","chooseVideo","compressed","compressd","success","res","duration","tempFilePath","size","v","substr","lastIndexOf","postObject","Bucket","Region","FilePath","onProgress","info","percent","toFixed","err","time","console","error","log","videoUlrR","fail","upImg","imgArr","progressArr","length","real","chooseImage","count","tempFilePaths","entries","i","temp","noUse","upLoad","j","bindDateChange","userChooseStart","detail","value","userChooseEnd","image","upImgDetail","courseDetailUp","courseDetailUpImgOperation","itemList","showActionSheet","tapIndex","showImg","splice","upImg2","imgOperation","upImg3","imgOperation2","upno","goRelease","subOnline","subOffline","nameText","showImage","classImage","push","wxrequest","url","getUrl","teacherActiveSub","user_id","style","title","class_time","start_time","toString","slice","end_time","show_image","join","class_image","hideLoading","status","navigateTo","desc","teacherCourseSub","Object","assign","video_url","is_free","video_time","Math","floor","getDetail","courseDetail","activeDetail","course_id","active_id","s","split","onLoad","options","setBar","onReady","onShow","onHide","onUnload","onPullDownRefresh"],"mappings":"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","file":"releaseCourse.js","sourcesContent":["// 获取全局应用程序实例对象\nconst app = getApp()\nconst COS = require('../cos-js-sdk-v5.min.js')\nconst config = require('../config')\nconst cos = new COS({\n  getAuthorization (params, callback) {\n    let authorization = COS.getAuthorization({\n      SecretId: config.SecretId,\n      SecretKey: config.SecretKey,\n      Method: params.Method,\n      Key: params.Key\n    })\n    callback(authorization)\n  }\n})\n// 创建页面实例对象\nPage({\n  /**\n   * 页面的初始数据\n   */\n  data: {\n    courseArr: ['视频课程', '手把手线下课程', '跟师学驻店课程'],\n    labelArr: app.data.label,\n    courseIndex: 0,\n    labelIndex: 0,\n    videoUrl: null,\n    upImgArr: [],\n    upImgArrProgress: [],\n    upImgArr2: [],\n    upImgArrProgress2: [],\n    upImgArr3: [],\n    upImgArrProgress3: [],\n    upImgArr4: [],\n    upImgArrProgress4: [],\n    startDay: app.momentFormat(new Date(), 'YYYY/MM/DD'),\n    startDay2: app.momentFormat(app.momentAdd(1, 'd'), 'YYYY/MM/DD'),\n    endDay: app.momentFormat(app.momentAdd(3, 'M'), 'YYYY/MM/DD'),\n    endDayShould: ''\n  },\n  inputValue (e) {\n    app.inputValue(e, this)\n  },\n  chooseF (e) {\n    if (e.currentTarget.dataset.type === 'course') {\n      if (this.data.id) return app.setToast(this, {content: '不可修改课程类型'})\n      if (e.currentTarget.dataset.index > app.gs('userInfoAll').is_teach) return app.setToast(this, {content: '您还没有权限发布此类型的课程，请联系客服'})\n      this.setData({\n        courseIndex: e.currentTarget.dataset.index\n      })\n    } else {\n      this.setData({\n        labelIndex: e.currentTarget.dataset.index\n      })\n    }\n  },\n\n  upVideo () {\n    if (this.data.upText === '上传中' || this.data.upText === '等待上传') return\n    let that = this\n    this.setData({\n      speed: '0KB/s',\n      upText: '等待上传'\n    })\n    let start = new Date().getTime()\n    wx.chooseVideo({\n      compressed: that.data.compressd,\n      success (res) {\n        that.setData({\n          duration: res.duration,\n          videoUrl: res.tempFilePath,\n          size: res.size / 1024 > 1024 ? res.size / 1024 / 1024 + 'M' : res.size / 1024 + 'KB'\n        })\n        let v = res.tempFilePath\n        let Key = `video/${app.gs('userInfoAll').id || 10000}/${v.substr(v.lastIndexOf('/') + 1)}`\n        cos.postObject({\n          Bucket: config.Bucket,\n          Region: config.Region,\n          Key,\n          FilePath: v,\n          onProgress: function (info) {\n            that.setData({\n              percent: info.percent * 100,\n              upText: '上传中',\n              speed: info.speed / 1024 > 1024 ? (info.speed / 1024 / 1024).toFixed(2) + 'M/s' : (info.speed / 1024).toFixed(2) + 'KB/s'\n            })\n          }\n        }, (err, data) => {\n          that.data.time = (new Date().getTime() - start) / 1000\n          if (err) {\n            console.error('upLoadErr', err)\n            that.setData({\n              upText: '失败,请上传不超过100M大小的MP4格式视频'\n            })\n          } else {\n            console.log('data', data)\n            that.setData({\n              upText: '成功',\n              videoUlrR: `https://${config.Bucket}.cos.${config.Region}.myqcloud.com/${Key}`\n            })\n          }\n        })\n      },\n      fail () {\n        that.setData({\n          upText: '',\n          speed: '替换视频'\n        })\n      }\n    })\n  },\n  upImg (e, index) {\n    let imgArr, progressArr\n    if (e.currentTarget.dataset.type === 'detail') {\n      imgArr = 'upImgArr2'\n      progressArr = 'upImgArrProgress2'\n    } else {\n      imgArr = 'upImgArr'\n      progressArr = 'upImgArrProgress'\n    }\n    if (this.data[imgArr].length > 0) {\n      if (this.data[imgArr][0].real) {\n        index = 0\n      } else {\n        return\n      }\n    }\n    let that = this\n    let length = that.data[imgArr].length || 0\n    let id = app.gs('userInfoAll').id || 10000\n    wx.chooseImage({\n      count: index >= 0 ? 1 : 9 - length,\n      success (res) {\n        for (let [i, v] of res.tempFilePaths.entries()) {\n          if (!that.data[imgArr][index >= 0 ? index : length + i]) {\n            that.data[imgArr][index >= 0 ? index : length + i] = {\n              temp: null,\n              real: null\n            }\n          }\n          that.data[imgArr][index >= 0 ? index : length + i]['real'] = ''\n          that.data[imgArr][index >= 0 ? index : length + i]['temp'] = v\n        }\n        if (e.currentTarget.dataset.type === 'detail') {\n          that.setData({\n            upImgArr2: that.data[imgArr]\n          })\n        } else {\n          that.setData({\n            upImgArr: that.data[imgArr]\n          })\n        }\n        function noUse () {}\n        (function upLoad (j) {\n          let v = res.tempFilePaths[j]\n          let Key = `image/${id}/${v.substr(v.lastIndexOf('/') + 1)}` // 这里指定上传的文件名\n          cos.postObject({\n            Bucket: config.Bucket,\n            Region: config.Region,\n            Key: Key,\n            FilePath: v,\n            onProgress: function (info) {\n              that.data[progressArr][index >= 0 ? index : length + j] = info.percent * 100\n              if (e.currentTarget.dataset.type === 'detail') {\n                that.setData({\n                  upImgArrProgress2: that.data[progressArr]\n                })\n              } else {\n                that.setData({\n                  upImgArrProgress: that.data[progressArr]\n                })\n              }\n            }\n          }, (err, data) => {\n            if (err) {\n              that.data[imgArr][index >= 0 ? index : length + j]['upFail'] = true\n              if (e.currentTarget.dataset.type === 'detail') {\n                that.setData({\n                  upImgArr2: that.data[imgArr]\n                })\n              } else {\n                that.setData({\n                  upImgArr: that.data[imgArr]\n                })\n              }\n            } else {\n              console.log(data)\n              that.data[imgArr][index >= 0 ? index : length + j]['real'] = `https://${config.Bucket}.cos.${config.Region}.myqcloud.com/${Key}`\n              that.data[imgArr][index >= 0 ? index : length + j]['Key'] = Key\n              if (e.currentTarget.dataset.type === 'detail') {\n                that.setData({\n                  upImgArr2: that.data[imgArr]\n                })\n              } else {\n                that.setData({\n                  upImgArr: that.data[imgArr]\n                })\n              }\n            }\n            if (j + 1 < res.tempFilePaths.length) upLoad(j + 1)\n          })\n        })(0)\n      }\n    })\n  },\n\n  bindDateChange (e) {\n    if (e.currentTarget.dataset.type === 'start') {\n      this.setData({\n        userChooseStart: app.momentFormat(e.detail.value, 'YYYY/MM/DD'),\n        startDay2: app.momentFormat(app.momentAdd(1, 'd', e.detail.value), 'YYYY/MM/DD'),\n        userChooseEnd: app.momentFormat(app.momentAdd(1, 'd', e.detail.value), 'YYYY/MM/DD'),\n        endDay: app.momentFormat(app.momentAdd(3, 'M', e.detail.value), 'YYYY/MM/DD')\n      })\n      app.setToast(this, {content: '请选择结束日期', image: null})\n    } else {\n      this.setData({\n        userChooseEnd: app.momentFormat(e.detail.value, 'YYYY/MM/DD')\n      })\n    }\n  },\n  // 课程详情上传\n  upImgDetail (index) {\n    let imgArr = 'upImgArr2'\n    let progressArr = 'upImgArrProgress2'\n    let that = this\n    let length = that.data[imgArr].length || 0\n    let id = app.gs('userInfoAll').id || 10000\n    wx.chooseImage({\n      count: 1,\n      success (res) {\n        for (let [i, v] of res.tempFilePaths.entries()) {\n          if (!that.data[imgArr][index >= 0 ? index : length + i]) {\n            that.data[imgArr][index >= 0 ? index : length + i] = {\n              temp: null,\n              real: null\n            }\n          }\n          that.data[imgArr][index >= 0 ? index : length + i]['real'] = ''\n          that.data[imgArr][index >= 0 ? index : length + i]['temp'] = v\n        }\n        that.setData({\n          upImgArr2: that.data[imgArr]\n        })\n        function noUse () {}\n        (function upLoad (j) {\n          let v = res.tempFilePaths[j]\n          let Key = `image/${id}/${v.substr(v.lastIndexOf('/') + 1)}` // 这里指定上传的文件名\n          cos.postObject({\n            Bucket: config.Bucket,\n            Region: config.Region,\n            Key: Key,\n            FilePath: v,\n            onProgress: function (info) {\n              that.data[progressArr][index >= 0 ? index : length + j] = info.percent * 100\n              that.setData({\n                upImgArrProgress2: that.data[progressArr],\n                courseDetailUp: info.percent * 100 >= 99 ? 0 : 1\n              })\n            }\n          }, (err, data) => {\n            if (err) {\n              that.data[imgArr][index >= 0 ? index : length + j]['upFail'] = true\n              that.setData({\n                upImgArr2: that.data[imgArr]\n              })\n            } else {\n              console.log(data)\n              that.data[imgArr][index >= 0 ? index : length + j]['real'] = `https://${config.Bucket}.cos.${config.Region}.myqcloud.com/${Key}`\n              that.data[imgArr][index >= 0 ? index : length + j]['Key'] = Key\n              that.setData({\n                upImgArr2: that.data[imgArr]\n              })\n            }\n            if (j + 1 < res.tempFilePaths.length) upLoad(j + 1)\n          })\n        })(0)\n      }\n    })\n  },\n  // 课程详情上传图片操作\n  courseDetailUpImgOperation (e) {\n    if (this.data.courseDetailUp) return app.setToast(this, {content: '图片上传中,请稍后操作'})\n    let that = this\n    let itemList = ['查看图片', '替换图片', '删除图片']\n    for (let v of this.data.upImgArr2) {\n      if (!v.real) itemList = ['查看图片', '替换图片']\n    }\n    wx.showActionSheet({\n      itemList,\n      success (res) {\n        if (res.tapIndex === 0) {\n          app.showImg(that.data.upImgArr2[e.currentTarget.dataset.index].temp, [that.data.upImgArr2[e.currentTarget.dataset.index].temp])\n        } else if (res.tapIndex === 2) {\n          that.data.upImgArr2.splice(e.currentTarget.dataset.index, 1)\n          that.setData({\n            upImgArr2: that.data.upImgArr2\n          })\n        } else if (res.tapIndex === 1) {\n          that.upImgDetail(e.currentTarget.dataset.index)\n        }\n      }\n    })\n  },\n  // 多图上传\n  upImg2 (index) {\n    let imgArr = 'upImgArr3'\n    let progressArr = 'upImgArrProgress3'\n    let that = this\n    let length = that.data[imgArr].length || 0\n    let id = app.gs('userInfoAll').id || 10000\n    wx.chooseImage({\n      count: index >= 0 ? 1 : 9 - length,\n      success (res) {\n        for (let [i, v] of res.tempFilePaths.entries()) {\n          if (!that.data[imgArr][index >= 0 ? index : length + i]) {\n            that.data[imgArr][index >= 0 ? index : length + i] = {\n              temp: null,\n              real: null\n            }\n          }\n          that.data[imgArr][index >= 0 ? index : length + i]['real'] = ''\n          that.data[imgArr][index >= 0 ? index : length + i]['temp'] = v\n        }\n        that.setData({\n          upImgArr3: that.data[imgArr]\n        })\n        function noUse () {}\n        (function upLoad (j) {\n          let v = res.tempFilePaths[j]\n          let Key = `image/${id}/${v.substr(v.lastIndexOf('/') + 1)}` // 这里指定上传的文件名\n          cos.postObject({\n            Bucket: config.Bucket,\n            Region: config.Region,\n            Key: Key,\n            FilePath: v,\n            onProgress: function (info) {\n              that.data[progressArr][index >= 0 ? index : length + j] = info.percent * 100\n              that.setData({\n                upImgArrProgress3: that.data[progressArr]\n              })\n            }\n          }, (err, data) => {\n            if (err) {\n              that.data[imgArr][index >= 0 ? index : length + j]['upFail'] = true\n              that.setData({\n                upImgArr3: that.data[imgArr]\n              })\n            } else {\n              console.log(data)\n              that.data[imgArr][index >= 0 ? index : length + j]['real'] = `https://${config.Bucket}.cos.${config.Region}.myqcloud.com/${Key}`\n              that.data[imgArr][index >= 0 ? index : length + j]['Key'] = Key\n              that.setData({\n                upImgArr3: that.data[imgArr]\n              })\n            }\n            if (j + 1 < res.tempFilePaths.length) upLoad(j + 1)\n          })\n        })(0)\n      }\n    })\n  },\n\n  // 图片操作\n  imgOperation (e) {\n    if (!this.data.upImgArr3[e.currentTarget.dataset.index].real) return app.setToast(this, {content: '请稍后操作'})\n    let that = this\n    let itemList = ['查看图片', '替换图片', '删除图片']\n    for (let v of this.data.upImgArr3) {\n      if (!v.real) itemList = ['查看图片', '替换图片']\n    }\n    wx.showActionSheet({\n      itemList,\n      success (res) {\n        if (res.tapIndex === 0) {\n          app.showImg(that.data.upImgArr3[e.currentTarget.dataset.index].temp, [that.data.upImgArr3[e.currentTarget.dataset.index].temp])\n        } else if (res.tapIndex === 2) {\n          that.data.upImgArr3.splice(e.currentTarget.dataset.index, 1)\n          that.setData({\n            upImgArr3: that.data.upImgArr3\n          })\n        } else if (res.tapIndex === 1) {\n          that.upImg2(e.currentTarget.dataset.index)\n        }\n      }\n    })\n  },\n\n  // 多图上传\n  upImg3 (index) {\n    let imgArr = 'upImgArr4'\n    let progressArr = 'upImgArrProgress4'\n    let that = this\n    let length = that.data[imgArr].length || 0\n    let id = app.gs('userInfoAll').id || 10000\n    wx.chooseImage({\n      count: index >= 0 ? 1 : 9 - length,\n      success (res) {\n        for (let [i, v] of res.tempFilePaths.entries()) {\n          if (!that.data[imgArr][index >= 0 ? index : length + i]) {\n            that.data[imgArr][index >= 0 ? index : length + i] = {\n              temp: null,\n              real: null\n            }\n          }\n          that.data[imgArr][index >= 0 ? index : length + i]['real'] = ''\n          that.data[imgArr][index >= 0 ? index : length + i]['temp'] = v\n        }\n        that.setData({\n          upImgArr4: that.data[imgArr]\n        })\n        function noUse () {}\n        (function upLoad (j) {\n          let v = res.tempFilePaths[j]\n          let Key = `image/${id}/${v.substr(v.lastIndexOf('/') + 1)}` // 这里指定上传的文件名\n          cos.postObject({\n            Bucket: config.Bucket,\n            Region: config.Region,\n            Key: Key,\n            FilePath: v,\n            onProgress: function (info) {\n              that.data[progressArr][index >= 0 ? index : length + j] = info.percent * 100\n              that.setData({\n                upImgArrProgress4: that.data[progressArr]\n              })\n            }\n          }, (err, data) => {\n            if (err) {\n              that.data[imgArr][index >= 0 ? index : length + j]['upFail'] = true\n              that.setData({\n                upImgArr4: that.data[imgArr]\n              })\n            } else {\n              console.log(data)\n              that.data[imgArr][index >= 0 ? index : length + j]['real'] = `https://${config.Bucket}.cos.${config.Region}.myqcloud.com/${Key}`\n              that.data[imgArr][index >= 0 ? index : length + j]['Key'] = Key\n              that.setData({\n                upImgArr4: that.data[imgArr]\n              })\n            }\n            if (j + 1 < res.tempFilePaths.length) upLoad(j + 1)\n          })\n        })(0)\n      }\n    })\n  },\n\n  // 图片操作\n  imgOperation2 (e) {\n    if (!this.data.upImgArr4[e.currentTarget.dataset.index].real) return app.setToast(this, {content: '请稍后操作'})\n    let that = this\n    let itemList = ['查看图片', '替换图片', '删除图片']\n    for (let v of this.data.upImgArr4) {\n      if (!v.real) itemList = ['查看图片', '替换图片']\n    }\n    wx.showActionSheet({\n      itemList,\n      success (res) {\n        if (res.tapIndex === 0) {\n          app.showImg(that.data.upImgArr4[e.currentTarget.dataset.index].temp, [that.data.upImgArr4[e.currentTarget.dataset.index].temp])\n        } else if (res.tapIndex === 2) {\n          that.data.upImgArr4.splice(e.currentTarget.dataset.index, 1)\n          that.setData({\n            upImgArr4: that.data.upImgArr4\n          })\n        } else if (res.tapIndex === 1) {\n          that.upImg3(e.currentTarget.dataset.index)\n        }\n      }\n    })\n  },\n\n  upno () {\n    app.setToast(this, {content: '图片上传中，请稍后操作'})\n  },\n  goRelease () {\n    if (this.data.courseIndex * 1 === 0) {\n      this.subOnline()\n    } else {\n      this.subOffline()\n    }\n  },\n  // 发布线下课程\n  subOffline () {\n    let that = this\n    if (!that.data.nameText) return app.setToast(this, {content: '请填写课程标题'})\n    if (!that.data.upImgArr.length) return app.setToast(this, {content: '请上传课程封面'})\n    let showImage = []\n    let classImage = []\n    for (let v of this.data.upImgArr4) {\n      classImage.push(v.real)\n    }\n    if (!classImage.length && that.data.courseIndex * 1 === 2) return app.setToast(this, {content: '请上传至少一张教室环境图片'})\n    for (let v of this.data.upImgArr3) {\n      showImage.push(v.real)\n    }\n    if (!showImage.length) return app.setToast(this, {content: '请上传至少一张作品秀图片'})\n    app.wxrequest({\n      url: app.getUrl().teacherActiveSub,\n      data: that.data.courseIndex * 1 === 1 ? {\n        id: that.data.id || '',\n        user_id: app.gs('userInfoAll').id,\n        style: that.data.courseIndex * 2,\n        label: that.data.labelArr[that.data.labelIndex].label,\n        title: that.data.nameText,\n        image: that.data.upImgArr[0].real,\n        class_time: '随到随学',\n        start_time: that.data.userChooseStart ? (new Date(that.data.userChooseStart).getTime()).toString().slice(0, 10) : (new Date(that.data.startDay).getTime()).toString().slice(0, 10),\n        end_time: that.data.userChooseEnd ? (new Date(that.data.userChooseEnd).getTime()).toString().slice(0, 10) : (new Date(that.data.startDay2).getTime()).toString().slice(0, 10),\n        show_image: showImage.join(','),\n        class_image: ''\n      } : {\n        id: that.data.id || '',\n        user_id: app.gs('userInfoAll').id,\n        style: that.data.courseIndex * 2,\n        label: that.data.labelArr[that.data.labelIndex].label,\n        title: that.data.nameText,\n        image: that.data.upImgArr[0].real,\n        class_time: '随到随学',\n        start_time: that.data.userChooseStart ? (new Date(that.data.userChooseStart).getTime()).toString().slice(0, 10) : (new Date(that.data.startDay).getTime()).toString().slice(0, 10),\n        end_time: that.data.userChooseEnd ? (new Date(that.data.userChooseEnd).getTime()).toString().slice(0, 10) : (new Date(that.data.startDay2).getTime()).toString().slice(0, 10),\n        show_image: showImage.join(','),\n        class_image: classImage.join(',')\n      },\n      success (res) {\n        wx.hideLoading()\n        if (res.data.status === 200) {\n          that.data.id = res.data.data\n          wx.navigateTo({\n            url: `../../coursePage/courseDetail2/courseDetail?id=${res.data.data}&type=${that.data.courseIndex * 2}`\n          })\n        } else {\n          app.setToast(that, {content: res.data.desc})\n        }\n      }\n    })\n  },\n  // 发布线上课程\n  subOnline () {\n    let that = this\n    if (!that.data.videoUlrR) return app.setToast(this, {content: '请上传课程视频或等待课程上传完毕'})\n    else if (!that.data.upImgArr.length || !that.data.upImgArr[0].real) return app.setToast(this, {content: '请上传视频封面图'})\n    else if (!that.data.nameText) return app.setToast(this, {content: '请填写视频标题'})\n    let detail = []\n    for (let v of this.data.upImgArr2) {\n      detail.push(v.real)\n    }\n    app.wxrequest({\n      url: app.getUrl().teacherCourseSub,\n      data: Object.assign({\n        user_id: app.gs('userInfoAll').id,\n        title: that.data.nameText,\n        label: that.data.labelArr[that.data.labelIndex].label,\n        video_url: that.data.videoUlrR,\n        image: that.data.upImgArr[0].real,\n        detail: detail.join(','),\n        is_free: 0,\n        video_time: Math.floor(that.data.duration) || 0\n      }, that.data.id ? {id: that.data.id} : {}),\n      success (res) {\n        wx.hideLoading()\n        if (res.data.status === 200) {\n          that.data.id = res.data.data\n          wx.navigateTo({\n            url: `../../coursePage/courseDetail2/courseDetail?id=${res.data.data}&type=1`\n          })\n        } else {\n          app.setToast(that, {content: res.data.desc})\n        }\n      }\n    })\n  },\n  // 线上课程详情\n  getDetail () {\n    let that = this\n    app.wxrequest({\n      url: that.data.courseIndex * 1 === 0 ? app.getUrl().courseDetail : app.getUrl().activeDetail,\n      data: that.data.courseIndex * 1 === 0 ? {\n        course_id: that.data.id,\n        user_id: app.gs('userInfoAll').id\n      } : {\n        active_id: that.data.id,\n        user_id: app.gs('userInfoAll').id\n      },\n      success (res) {\n        wx.hideLoading()\n        let s = res.data.data\n        // 封面\n        if (s.image) {\n          that.data.upImgArr.push({\n            temp: s.image,\n            real: s.image\n          })\n        }\n        // 详情\n        if (s.detail) {\n          for (let v of s.detail.split(',')) {\n            that.data.upImgArr2.push({\n              temp: v,\n              real: v\n            })\n          }\n        }\n        if (s.show_image) {\n          for (let v of s.show_image.split(',')) {\n            that.data.upImgArr3.push({\n              temp: v,\n              real: v\n            })\n            that.data.upImgArrProgress3.push(100)\n          }\n        }\n        if (s.class_image) {\n          for (let v of s.class_image.split(',')) {\n            that.data.upImgArr4.push({\n              temp: v,\n              real: v\n            })\n            that.data.upImgArrProgress4.push(100)\n          }\n        }\n        that.setData({\n          userChooseStart: app.momentFormat(s.start_time * 1000, 'YYYY/MM/DD'),\n          userChooseEnd: app.momentFormat(s.end_time * 1000, 'YYYY/MM/DD'),\n          endDay: app.momentFormat(app.momentAdd(3, 'M', s.start_time * 1000), 'YYYY/MM/DD'),\n          labelIndex: s.label - 1,\n          videoUrl: s.video_url,\n          upText: '成功',\n          videoUlrR: s.video_url,\n          nameText: s.title,\n          upImgArr: that.data.upImgArr,\n          upImgArr2: that.data.upImgArr2,\n          upImgArr3: that.data.upImgArr3,\n          upImgArrProgress3: that.data.upImgArrProgress3,\n          upImgArr4: that.data.upImgArr4,\n          upImgArrProgress4: that.data.upImgArrProgress4\n        })\n      }\n    })\n  },\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad (options) {\n    if (options.id) {\n      this.data.id = options.id\n      this.setData({\n        courseIndex: options.courseIndex\n      }, this.getDetail)\n    }\n    app.setBar('发布课程')\n    // TODO: onLoad\n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady () {\n    // TODO: onReady\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow () {\n    // TODO: onShow\n  },\n\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide () {\n    // TODO: onHide\n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload () {\n    // TODO: onUnload\n  },\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh () {\n    // TODO: onPullDownRefresh\n  }\n})\n"]}