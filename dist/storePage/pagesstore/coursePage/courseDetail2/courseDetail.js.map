{"version":3,"sources":["storePage/pagesstore/coursePage/courseDetail2/courseDetail.js"],"names":["app","getApp","PAGE","timer","CAN_CHANGE","NEED_SHOW","Page","data","latitude","longitude","poster","controls","videoSrc","currentIndex","centerHeight","starArr","videoTab","t","questionList","question","answer","chooseIndex","userChoose","rightAnswer","commentArr","rIndex","goComment","setData","writeComment","userChooseAnswer","e","currentTarget","dataset","qindex","aindex","videoPlay","play","needSmall","videoEnd","console","log","options","type","index","scrollToId","id","chooseVideoPlay","videoPlayIndex","showMore","replyFocus","showComment","show_more","noUp","startChoose","starIndex","tagChoose","tagIndex","upStar","setToast","content","starOperation","collectO","collect","startAnswer","lostTime","clearInterval","answerQuestion","finish","scrollOperation","s","detail","scrollTop","change","deltaY","touchend","touchmove","toucstart","scrollUp","replyOperation","replyName","name","cindex","replyBlur","showImg","src","detailInfo","imgarr","buyOperation","wx","navigateTo","url","getScrollInHeight","query","createSelectorQuery","in","selectAll","boundingClientRect","res","i","v","height","exec","goMapPoint","openLocation","scale","getEvaluate","that","wxrequest","getUrl","evaluate","course_id","page","success","hideLoading","status","concat","lists","more","pre_page","length","desc","onScrollUp","onreachbottom","getDetail","activeDetail","courseDetail","active_id","user_id","gs","split","class_image","room_teacher","room_images","show_image","start_time","momentFormat","end_time","err","setBar","title","writeConfirm","unshift","avatar","nickname","star","Math","floor","random","create_time","replyArr","value","inputValue","onLoad","push","onReady","onShow","onHide","onUnload","onPullDownRefresh"],"mappings":"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","file":"courseDetail.js","sourcesContent":["// 获取全局应用程序实例对象\nconst app = getApp()\nlet PAGE = 0\nlet timer = null\nlet CAN_CHANGE = false\nlet NEED_SHOW = [0, 0, 0]\n// 创建页面实例对象\nPage({\n  /**\n   * 页面的初始数据\n   */\n  data: {\n    latitude: 23.111123,\n    longitude: 113.123432,\n    poster: 'https://c.jiangwenqiang.com/api/logo.jpg',\n    controls: true,\n    videoSrc: 'http://wxsnsdy.tc.qq.com/105/20210/snsdyvideodownload?filekey=30280201010421301f0201690402534804102ca905ce620b1241b726bc41dcff44e00204012882540400&bizid=1023&hy=SH&fileparam=302c020101042530230204136ffd93020457e3c4ff02024ef202031e8d7f02030f42400204045a320a0201000400',\n    currentIndex: 0,\n    centerHeight: 63,\n    starArr: ['差', '还行', '中等', '好', '很好'],\n    videoTab: [\n      {\n        t: '详情'\n      },\n      {\n        t: '教室'\n      },\n      {\n        t: '评价 (22)'\n      }\n    ],\n    questionList: [\n      {\n        question: '2.圆三针手工雾眉操作要领操，这个是题干这个是题干圆三针手工雾眉操作要领操，这个是题干这个是题干圆三针手工雾眉操作要领操，这个',\n        answer: ['wdfasdf', 'asdfasdfsd', 'asdfasdfasdf'],\n        chooseIndex: null\n      },\n      {\n        question: '2.圆三针手工雾眉操作要领操，这个是题干这个是题干圆三针手工雾眉操作要领操，这个是题干这个是题干圆三针手工雾眉操作要领操，这个',\n        answer: ['圆三针手工雾眉操作要领操', '圆三针手工雾眉操作要领操', '圆三针手工雾眉操作要领操'],\n        chooseIndex: null,\n        userChoose: 0,\n        rightAnswer: 1\n      },\n      {\n        question: '2.圆三针手工雾眉操作要领操，这个是题干这个是题干圆三针手工雾眉操作要领操，这个是题干这个是题干圆三针手工雾眉操作要领操，这个',\n        answer: ['圆三针手工雾眉操作要领操', 'asdfasdfsd', '圆三针手工雾眉操作要领操'],\n        chooseIndex: null,\n        userChoose: 1,\n        rightAnswer: 1\n      },\n      {\n        question: '2.圆三针手工雾眉操作要领操，这个是题干这个是题干圆三针手工雾眉操作要领操，这个是题干这个是题干圆三针手工雾眉操作要领操，这个',\n        answer: ['圆三针手工雾眉操作要领操', 'asdfasdfsd', '圆三针手工雾眉操作要领操'],\n        chooseIndex: null,\n        userChoose: 1,\n        rightAnswer: 1\n      },\n      {\n        question: '2.圆三针手工雾眉操作要领操，这个是题干这个是题干圆三针手工雾眉操作要领操，这个是题干这个是题干圆三针手工雾眉操作要领操，这个',\n        answer: ['圆三针手工雾眉操作要领操', 'asdfasdfsd', '圆三针手工雾眉操作要领操'],\n        chooseIndex: null,\n        userChoose: 1,\n        rightAnswer: 1\n      }\n    ],\n    commentArr: [],\n    rIndex: -1\n  },\n  goComment () {\n    this.setData({\n      writeComment: !this.data.writeComment\n    })\n  },\n  userChooseAnswer (e) {\n    this.data.questionList[e.currentTarget.dataset.qindex]['chooseIndex'] = e.currentTarget.dataset.aindex\n    this.setData({\n      questionList: this.data.questionList\n    })\n  },\n  videoPlay () {\n    this.setData({\n      play: !this.data.play,\n      needSmall: false\n    })\n  },\n  videoEnd () {\n    this.videoPlay()\n    console.log('视频播放结束')\n  },\n  chooseIndex (e) {\n    if (this.data.options && this.data.options.type * 1 === 3) {\n      this.setData({\n        currentIndex: e.currentTarget.dataset.index\n      })\n    } else {\n      this.setData({\n        currentIndex: e.currentTarget.dataset.index,\n        scrollToId: e.currentTarget.dataset.id\n      })\n    }\n  },\n\n  chooseVideoPlay (e) {\n    this.setData({\n      videoPlayIndex: e.currentTarget.dataset.index\n    })\n  },\n  showMore (e) {\n    if (e.currentTarget.dataset.type === 'comment') {\n      return this.setData({\n        replyFocus: false,\n        showComment: !this.data.showComment\n      })\n    }\n    this.setData({\n      show_more: !this.data.show_more\n    })\n  },\n  noUp () {},\n  startChoose (e) {\n    this.setData({\n      starIndex: e.currentTarget.dataset.index\n    })\n  },\n  tagChoose (e) {\n    this.setData({\n      tagIndex: e.currentTarget.dataset.index\n    })\n  },\n\n  upStar () {\n    // if (typeof this.data.tagIndex === 'undefined') return app.setToast(this, {content: '请选择难度等级'})\n    if (typeof this.data.starIndex === 'undefined') return app.setToast(this, {content: '请选择星星等级'})\n    this.setData({\n      starOperation: true\n    })\n  },\n\n  collectO () {\n    this.setData({\n      collect: !this.data.collect\n    })\n  },\n\n  startAnswer (e) {\n    if (e.currentTarget.dataset.type === 'open') this.lostTime(60)\n    else if (e.currentTarget.dataset.type === 'practice') this.lostTime(60)\n    else {\n      if (timer) clearInterval(timer)\n    }\n    this.setData({\n      answerQuestion: !this.data.answerQuestion,\n      finish: e.currentTarget.dataset.type === 'upAnswer' ? 1 : 0\n    })\n  },\n\n  scrollOperation (e) {\n    // if (this.data.options && this.data.options.type * 1 === 3) return\n    if (!CAN_CHANGE) return\n    if (this.data.options && this.data.options.type * 1 !== 3) {\n      let s = e.detail.scrollTop\n      let currentIndex = 0\n      if (s < NEED_SHOW[0]) currentIndex = 0\n      else if (s > NEED_SHOW[0] && s < NEED_SHOW[1]) currentIndex = 1\n      else if (s > NEED_SHOW[1]) currentIndex = 2\n      this.setData({\n        currentIndex\n      })\n    }\n    let change = e.detail.deltaY\n    if (change <= 0) {\n      // 下方隐藏，上方缩小\n      this.setData({\n        needSmall: this.data.play ? 0 : true\n      })\n    }\n  },\n  touchend () {\n    CAN_CHANGE = false\n  },\n  touchmove () {\n    // console.log('move', e)\n  },\n  toucstart () {\n    CAN_CHANGE = true\n  },\n  scrollUp () {\n    CAN_CHANGE = false\n    this.setData({\n      needSmall: false\n    })\n  },\n  // 用户回复操作\n  replyOperation (e) {\n    if (this.data.replyFocus) return\n    this.setData({\n      replyName: e.currentTarget.dataset.name,\n      rIndex: e.currentTarget.dataset.cindex,\n      replyFocus: true\n    })\n  },\n  replyBlur (e) {\n    console.log(e)\n    this.setData({\n      rIndex: -1,\n      replyFocus: false\n    })\n  },\n\n  showImg (e) {\n    app.showImg(e.currentTarget.dataset.src, this.data.detailInfo[e.currentTarget.dataset.imgarr])\n  },\n\n  buyOperation () {\n    // todo 发起支付\n    wx.navigateTo({\n      url: '/offlinePage/pagesnine/offlineApply/offlineApply'\n    })\n  },\n  // 获取滚动高度\n  getScrollInHeight () {\n    const query = wx.createSelectorQuery().in(this)\n    query.selectAll('.need-check').boundingClientRect(function (res) {\n      let i = 0\n      for (let v of res) {\n        NEED_SHOW[i] += v.height\n        if (v.id === 's1') {\n          i = 1\n          NEED_SHOW[i] += NEED_SHOW[i - 1]\n        } else if (v.id === 's2') {\n          i = 2\n          NEED_SHOW[i] += NEED_SHOW[i - 1]\n        }\n      }\n    }).exec()\n  },\n\n  goMapPoint (e) {\n    console.log(e.currentTarget.dataset)\n    wx.openLocation({\n      scale: 10,\n      ...(e.currentTarget.dataset)\n    })\n  },\n  // 获取评论\n  getEvaluate () {\n    let that = this\n    app.wxrequest({\n      url: app.getUrl().evaluate,\n      data: {\n        course_id: that.data.options.id,\n        page: ++PAGE\n      },\n      success (res) {\n        wx.hideLoading()\n        if (res.data.status === 200) {\n          that.setData({\n            commentArr: that.data.commentArr.concat(res.data.data.lists),\n            more: res.data.data.pre_page > res.data.data.lists.length ? 0 : 1\n          })\n        } else {\n          app.setToast(that, {content: res.data.desc})\n        }\n      }\n    })\n  },\n  // 评论弹窗触顶\n  onScrollUp () {\n    PAGE = 0\n    this.data.commentArr = []\n    this.getEvaluate()\n  },\n  // 评论弹窗触底\n  onreachbottom () {\n    if (this.data.more >= 1) this.getEvaluate()\n  },\n  // 获取详情\n  getDetail () {\n    let that = this\n    app.wxrequest({\n      url: that.data.options.type >= 2 ? app.getUrl().activeDetail : app.getUrl().courseDetail,\n      data: that.data.options.type >= 2 ? {\n        active_id: that.data.options.id,\n        user_id: app.gs('userInfoAll').id\n      } : {\n        course_id: that.data.options.id,\n        user_id: app.gs('userInfoAll').id\n      },\n      success (res) {\n        wx.hideLoading()\n        if (res.data.status === 200) {\n          if (res.data.data.detail) res.data.data.detail = res.data.data.detail.split(',')\n          if (res.data.data.class_image) res.data.data.class_image = res.data.data.class_image.split(',')\n          if (res.data.data.room_teacher) res.data.data.room_teacher = res.data.data.room_teacher.split(',')\n          if (res.data.data.room_images) res.data.data.room_images = res.data.data.room_images.split(',')\n          if (res.data.data.show_image) res.data.data.show_image = res.data.data.show_image.split(',')\n          try {\n            res.data.data.start_time = app.momentFormat(res.data.data.start_time * 1000, 'YYYY-MM-DD')\n            res.data.data.end_time = app.momentFormat(res.data.data.end_time * 1000, 'YYYY-MM-DD')\n          } catch (err) {\n            console.log(err)\n          }\n          that.setData({\n            detailInfo: res.data.data\n          })\n          app.setBar(res.data.data.title)\n        } else {\n          app.setToast(that, {content: res.data.desc})\n        }\n      }\n    })\n  },\n  // 发布直接评论\n  writeConfirm (e) {\n    this.data.commentArr.unshift({\n      avatar: this.data.poster,\n      nickname: '测试发布评论',\n      star: Math.floor(Math.random() * 5),\n      create_time: '刚刚',\n      replyArr: [],\n      content: typeof e.detail.value === 'string' ? e.detail.value : e.detail.value.content\n    })\n    this.goComment()\n    this.setData({\n      inputValue: '',\n      commentArr: this.data.commentArr\n    })\n  },\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad (options) {\n    // type 对应规则 1 线上课程 2 线下课程 3 教室\n    this.setData({\n      options\n    }, this.getDetail)\n    if (options.type * 1 === 2 || options.type * 1 === 4) {\n      this.data.videoTab[2].t = '作品秀'\n      this.setData({\n        videoTab: this.data.videoTab\n      })\n    } else if (options.type * 1 === 3) {\n      this.data.videoTab[1].t = '免费课程'\n      this.data.videoTab[2].t = '驻店课程'\n      this.data.videoTab.push({t: '作品秀'})\n      this.setData({\n        videoTab: this.data.videoTab\n      })\n    }\n    // TODO: onLoad\n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady () {\n    this.getScrollInHeight()\n    // TODO: onReady\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow () {\n    // TODO: onShow\n  },\n\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide () {\n    // TODO: onHide\n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload () {\n    // TODO: onUnload\n  },\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh () {\n    // TODO: onPullDownRefresh\n  }\n})\n"]}