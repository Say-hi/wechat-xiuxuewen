{"version":3,"sources":["storePage/pagesstore/coursePage/courseDetail/courseDetail.js"],"names":["app","getApp","PAGE","timer","CAN_CHANGE","NEED_SHOW","Page","data","swiperIndex","swiperArr","testImg","latitude","longitude","poster","controls","videoSrc","currentIndex","centerHeight","starArr","videoTab","t","commentArr","rIndex","swiperChange","e","setData","detail","current","goComment","writeComment","videoPlay","play","needSmall","videoEnd","console","log","chooseIndex","currentTarget","dataset","index","scrollToId","id","chooseVideoPlay","videoPlayIndex","showMore","type","replyFocus","showComment","show_more","noUp","startChoose","starIndex","tagChoose","tagIndex","upStar","setToast","content","starOperation","collectO","collect","startAnswer","lostTime","clearInterval","answerQuestion","finish","scrollOperation","options","s","scrollTop","change","deltaY","touchend","touchmove","toucstart","scrollUp","replyOperation","replyName","name","cindex","replyBlur","showImg","src","detailInfo","show_image","buyOperation","wx","navigateTo","url","getScrollInHeight","query","createSelectorQuery","in","selectAll","boundingClientRect","res","i","v","height","exec","goMapPoint","openLocation","scale","getEvaluate","that","wxrequest","getUrl","evaluate","course_id","page","success","hideLoading","status","concat","lists","more","pre_page","length","desc","onScrollUp","onreachbottom","onShareAppMessage","getDetail","teacherDotDetail","courseDetail","user_id","gs","room_teacher","split","room_images","setBar","room_name","title","writeConfirm","unshift","avatar","nickname","star","Math","floor","random","create_time","replyArr","value","inputValue","onLoad","onReady","onShow","onHide","onUnload","onPullDownRefresh"],"mappings":"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","file":"courseDetail.js","sourcesContent":["// 获取全局应用程序实例对象\nconst app = getApp()\nlet PAGE = 0\nlet timer = null\nlet CAN_CHANGE = false\nlet NEED_SHOW = [0, 0, 0]\n// 创建页面实例对象\nPage({\n  /**\n   * 页面的初始数据\n   */\n  data: {\n    swiperIndex: 1,\n    swiperArr: [app.data.testImg, app.data.testImg],\n    latitude: 23.111123,\n    longitude: 113.123432,\n    poster: 'https://c.jiangwenqiang.com/api/logo.jpg',\n    controls: true,\n    videoSrc: 'http://wxsnsdy.tc.qq.com/105/20210/snsdyvideodownload?filekey=30280201010421301f0201690402534804102ca905ce620b1241b726bc41dcff44e00204012882540400&bizid=1023&hy=SH&fileparam=302c020101042530230204136ffd93020457e3c4ff02024ef202031e8d7f02030f42400204045a320a0201000400',\n    currentIndex: 0,\n    centerHeight: 63,\n    starArr: ['差', '还行', '中等', '好', '很好'],\n    videoTab: [\n      {\n        t: '详情'\n      },\n      {\n        t: '教室'\n      },\n      {\n        t: '评价 (22)'\n      }\n    ],\n    commentArr: [],\n    rIndex: -1\n  },\n  swiperChange (e) {\n    this.setData({\n      swiperIndex: e.detail.current * 1 + 1\n    })\n  },\n  goComment () {\n    this.setData({\n      writeComment: !this.data.writeComment\n    })\n  },\n  videoPlay () {\n    this.setData({\n      play: !this.data.play,\n      needSmall: false\n    })\n  },\n  videoEnd () {\n    this.videoPlay()\n    console.log('视频播放结束')\n  },\n  chooseIndex (e) {\n    this.setData({\n      currentIndex: e.currentTarget.dataset.index,\n      scrollToId: e.currentTarget.dataset.id\n    })\n  },\n\n  chooseVideoPlay (e) {\n    this.setData({\n      videoPlayIndex: e.currentTarget.dataset.index\n    })\n  },\n  showMore (e) {\n    if (e.currentTarget.dataset.type === 'comment') {\n      return this.setData({\n        replyFocus: false,\n        showComment: !this.data.showComment\n      })\n    }\n    this.setData({\n      show_more: !this.data.show_more\n    })\n  },\n  noUp () {},\n  startChoose (e) {\n    this.setData({\n      starIndex: e.currentTarget.dataset.index\n    })\n  },\n  tagChoose (e) {\n    this.setData({\n      tagIndex: e.currentTarget.dataset.index\n    })\n  },\n\n  upStar () {\n    // if (typeof this.data.tagIndex === 'undefined') return app.setToast(this, {content: '请选择难度等级'})\n    if (typeof this.data.starIndex === 'undefined') return app.setToast(this, {content: '请选择星星等级'})\n    this.setData({\n      starOperation: true\n    })\n  },\n\n  collectO () {\n    this.setData({\n      collect: !this.data.collect\n    })\n  },\n\n  startAnswer (e) {\n    if (e.currentTarget.dataset.type === 'open') this.lostTime(60)\n    else if (e.currentTarget.dataset.type === 'practice') this.lostTime(60)\n    else {\n      if (timer) clearInterval(timer)\n    }\n    this.setData({\n      answerQuestion: !this.data.answerQuestion,\n      finish: e.currentTarget.dataset.type === 'upAnswer' ? 1 : 0\n    })\n  },\n\n  scrollOperation (e) {\n    // if (this.data.options && this.data.options.type * 1 === 3) return\n    if (!CAN_CHANGE) return\n    if (this.data.options && this.data.options.type * 1 !== 3) {\n      let s = e.detail.scrollTop\n      let currentIndex = 0\n      if (s < NEED_SHOW[0]) currentIndex = 0\n      else if (s > NEED_SHOW[0] && s < NEED_SHOW[1]) currentIndex = 1\n      else if (s > NEED_SHOW[1]) currentIndex = 2\n      this.setData({\n        currentIndex\n      })\n    }\n    let change = e.detail.deltaY\n    if (change <= 0) {\n      // 下方隐藏，上方缩小\n      this.setData({\n        needSmall: this.data.play ? 0 : true\n      })\n    }\n  },\n  touchend () {\n    CAN_CHANGE = false\n  },\n  touchmove () {\n    // console.log('move', e)\n  },\n  toucstart () {\n    CAN_CHANGE = true\n  },\n  scrollUp () {\n    CAN_CHANGE = false\n    this.setData({\n      needSmall: false\n    })\n  },\n  // 用户回复操作\n  replyOperation (e) {\n    if (this.data.replyFocus) return\n    this.setData({\n      replyName: e.currentTarget.dataset.name,\n      rIndex: e.currentTarget.dataset.cindex,\n      replyFocus: true\n    })\n  },\n  replyBlur (e) {\n    console.log(e)\n    this.setData({\n      rIndex: -1,\n      replyFocus: false\n    })\n  },\n\n  showImg (e) {\n    app.showImg(e.currentTarget.dataset.src, this.data.detailInfo.show_image)\n  },\n\n  buyOperation () {\n    // todo 发起支付\n    wx.navigateTo({\n      url: '/offlinePage/pagesnine/offlineApply/offlineApply'\n    })\n  },\n  // 获取滚动高度\n  getScrollInHeight () {\n    const query = wx.createSelectorQuery().in(this)\n    query.selectAll('.need-check').boundingClientRect(function (res) {\n      let i = 0\n      for (let v of res) {\n        NEED_SHOW[i] += v.height\n        if (v.id === 's1') {\n          i = 1\n          NEED_SHOW[i] += NEED_SHOW[i - 1]\n        } else if (v.id === 's2') {\n          i = 2\n          NEED_SHOW[i] += NEED_SHOW[i - 1]\n        }\n      }\n    }).exec()\n  },\n\n  goMapPoint (e) {\n    console.log(e.currentTarget.dataset)\n    wx.openLocation({\n      scale: 10,\n      ...(e.currentTarget.dataset)\n    })\n  },\n  // 获取评论\n  getEvaluate () {\n    let that = this\n    app.wxrequest({\n      url: app.getUrl().evaluate,\n      data: {\n        course_id: that.data.options.id,\n        page: ++PAGE\n      },\n      success (res) {\n        wx.hideLoading()\n        if (res.data.status === 200) {\n          that.setData({\n            commentArr: that.data.commentArr.concat(res.data.data.lists),\n            more: res.data.data.pre_page > res.data.data.lists.length ? 0 : 1\n          })\n        } else {\n          app.setToast(that, {content: res.data.desc})\n        }\n      }\n    })\n  },\n  // 评论弹窗触顶\n  onScrollUp () {\n    PAGE = 0\n    this.data.commentArr = []\n    this.getEvaluate()\n  },\n  // 评论弹窗触底\n  onreachbottom () {\n    if (this.data.more >= 1) this.getEvaluate()\n  },\n  // 分享\n  onShareAppMessage () {\n\n  },\n  // 获取详情\n  getDetail () {\n    let that = this\n    app.wxrequest({\n      url: that.data.options.type * 1 === 3 ? app.getUrl().teacherDotDetail : app.getUrl().courseDetail,\n      data: that.data.options.type * 1 === 3 ? {\n        user_id: app.gs('userInfoAll').id\n      } : {\n        course_id: that.data.options.id || 1,\n        user_id: app.gs('userInfoAll').id\n      },\n      success (res) {\n        wx.hideLoading()\n        if (res.data.status === 200) {\n          if (that.data.options.type * 1 === 3) {\n            res.data.data.room_teacher = res.data.data.room_teacher ? res.data.data.room_teacher.split(',') : []\n            res.data.data.show_image = res.data.data.show_image.split(',')\n            that.setData({\n              swiperArr: res.data.data.room_images.split(','),\n              detailInfo: res.data.data\n            })\n            app.setBar(res.data.data.room_name)\n          } else {\n            that.setData({\n              detailInfo: res.data.data\n            }, that.getEvaluate)\n            app.setBar(res.data.data.title)\n          }\n        } else {\n          app.setToast(that, {content: res.data.desc})\n        }\n      }\n    })\n  },\n  // 发布直接评论\n  writeConfirm (e) {\n    this.data.commentArr.unshift({\n      avatar: this.data.poster,\n      nickname: '测试发布评论',\n      star: Math.floor(Math.random() * 5),\n      create_time: '刚刚',\n      replyArr: [],\n      content: typeof e.detail.value === 'string' ? e.detail.value : e.detail.value.content\n    })\n    this.goComment()\n    this.setData({\n      inputValue: '',\n      commentArr: this.data.commentArr\n    })\n  },\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad (options) {\n    // type 对应规则 1 线上课程 2 线下课程 3 教室\n    this.setData({\n      options\n    }, this.getDetail)\n    if (options.type * 1 === 2 || options.type * 1 === 4) {\n      this.data.videoTab[2].t = '作品秀'\n      this.setData({\n        videoTab: this.data.videoTab\n      })\n    } else if (options.type * 1 === 3) {\n      this.data.videoTab[1].t = '老师风采'\n      this.data.videoTab[2].t = '作品秀'\n      this.setData({\n        videoTab: this.data.videoTab\n      })\n    }\n    // TODO: onLoad\n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady () {\n    this.getScrollInHeight()\n    // TODO: onReady\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow () {\n    // TODO: onShow\n  },\n\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide () {\n    // TODO: onHide\n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload () {\n    // TODO: onUnload\n  },\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh () {\n    // TODO: onPullDownRefresh\n  }\n})\n"]}