{"version":3,"sources":["storePage/pagesstore/coursePage/course/course.js"],"names":["app","getApp","Page","data","top_bg","gs","is_teach","tabArr","tabIndex","page","tabNav","label","testImg","lists","currentIndex","chooseIndex","e","setBar","currentTarget","dataset","text","setData","index","getList","that","wxrequest","url","getUrl","teacherUserVideo","teacherUserActive","user_id","id","success","res","wx","hideLoading","status","concat","more","pre_page","length","setToast","content","desc","onReachBottom","edit","navigateTo","style","del","showModal","title","cancelText","confirmText","confirm","teacherActiveDel","teacherCourseDel","res2","splice","onLoad","options","roomInfo","onReady","onShow","onHide","onUnload","onPullDownRefresh"],"mappings":"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","file":"course.js","sourcesContent":["// 获取全局应用程序实例对象\nconst app = getApp()\n// 创建页面实例对象\nPage({\n  /**\n   * 页面的初始数据\n   */\n  data: {\n    top_bg: app.gs('userInfoAll').is_teach <= 1 ? 'https://teach-1258261086.cos.ap-guangzhou.myqcloud.com/image/admin/storeSide/shop_bg_1.png' : 'https://teach-1258261086.cos.ap-guangzhou.myqcloud.com/image/admin/storeSide/shop_bg_2.png',\n    tabArr: ['视频课程', '线下课程'],\n    tabIndex: 0,\n    page: 0,\n    tabNav: app.data.label,\n    testImg: app.data.testImg,\n    lists: [],\n    currentIndex: 0\n  },\n  chooseIndex (e) {\n    app.setBar(e.currentTarget.dataset.text)\n    this.data.lists = []\n    this.data.page = 0\n    this.setData({\n      tabIndex: e.currentTarget.dataset.index\n    }, this.getList)\n  },\n  getList () {\n    let that = this\n    app.wxrequest({\n      url: that.data.tabIndex * 1 === 0 ? app.getUrl().teacherUserVideo : app.getUrl().teacherUserActive,\n      data: {\n        user_id: app.gs('userInfoAll').id,\n        page: ++that.data.page\n      },\n      success (res) {\n        wx.hideLoading()\n        if (res.data.status === 200) {\n          that.setData({\n            lists: that.data.lists.concat(res.data.data.lists),\n            more: res.data.data.pre_page > res.data.data.lists.length ? 0 : 1\n          })\n        } else {\n          app.setToast(that, {content: res.data.desc})\n        }\n      }\n    })\n  },\n  onReachBottom () {\n    if (this.data.more >= 1) this.getList()\n  },\n  edit (e) {\n    wx.navigateTo({\n      url: `../../releasePage/releaseCourse/releaseCourse?id=${e.currentTarget.dataset.id}&courseIndex=${this.data.lists[e.currentTarget.dataset.index].style ? this.data.lists[e.currentTarget.dataset.index].style / 2 : 0}`\n    })\n  },\n  del (e) {\n    let that = this\n    wx.showModal({\n      title: '删除确认',\n      content: '删除的课程不可恢复哦',\n      cancelText: '不删了',\n      confirmText: '删除',\n      success (res) {\n        if (res.confirm) {\n          app.wxrequest({\n            url: that.data.tabIndex >= 1 ? app.getUrl().teacherActiveDel : app.getUrl().teacherCourseDel,\n            data: {\n              user_id: app.gs('userInfoAll').id,\n              id: e.currentTarget.dataset.id\n            },\n            success (res2) {\n              wx.hideLoading()\n              if (res2.data.status === 200) {\n                that.data.lists.splice(e.currentTarget.dataset.index, 1)\n                that.setData({\n                  lists: that.data.lists\n                })\n              } else {\n                app.setToast(that, {content: res2.data.desc})\n              }\n            }\n          })\n        }\n      }\n    })\n  },\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad (options) {\n    app.setBar('视频课程')\n    this.setData({\n      options,\n      roomInfo: app.gs('roomInfo')\n    }, this.getList)\n    // TODO: onLoad\n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady () {\n    // TODO: onReady\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow () {\n    // TODO: onShow\n  },\n\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide () {\n    // TODO: onHide\n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload () {\n    // TODO: onUnload\n  },\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh () {\n    this.data.lists = []\n    this.data.page = 0\n    this.getList()\n    // TODO: onPullDownRefresh\n  }\n})\n"]}