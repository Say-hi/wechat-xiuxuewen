{"version":3,"sources":["pages/index/index.js"],"names":["app","getApp","timer","bmap","require","Page","data","HEIGHT_TOP","ALL_HEIGHT","testImg","page","imgDomain","answerArr","indicatorColor","indicatorActiveColor","indicatorActiveColorVideo","show","tabNav","upFormId","e","open_site","console","log","detail","authSetting","wx","showToast","title","setData","openType","that","setTimeout","Bmap","choose_site","chooseLocation","success","res","address","latitude","longitude","site","BMap","BMapWX","ak","regeocoding","location","addressInfo","fail","setKill","clearInterval","kill","shutDown","killArr","entries","i","nowData","Date","getTime","startTime","start_time","endTime","end_time","status","h","Math","floor","m","s","length","setInterval","getLocation","type","su","getIndex","MaskGetUserInfo","iv","needUserInfo","wxlogin","onReachBottom","zan","wxrequest","url","getUrl","like","obj_id","currentTarget","dataset","id","key","gs","hideLoading","code","indexData","columnArr","oindex","index","is_like","column","setToast","content","msg","goOther","getCourse","course","list","lists","v","push","avatar","image","room_name","price","onLoad","options","getNavTab","style","cb","swiperArr","onReady","onShow","onHide","onUnload","onShareAppMessage","t","path","imageUrl","g","onPullDownRefresh"],"mappings":"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","file":"index.js","sourcesContent":["// 获取全局应用程序实例对象\nconst app = getApp()\nlet timer = null\nconst bmap = require('../../utils/bmap-wx')\n// 创建页面实例对象\nPage({\n  /**\n   * 页面的初始数据\n   */\n  data: {\n    HEIGHT_TOP: app.data.HEIGHT_TOP,\n    ALL_HEIGHT: app.data.ALL_HEIGHT,\n    testImg: 'https://c.jiangwenqiang.com/api/logo.jpg',\n    page: 0,\n    imgDomain: app.data.imgDomain,\n    answerArr: [],\n    indicatorColor: 'rgba(0, 0, 0, 0.4)',\n    indicatorActiveColor: '#ffffff',\n    indicatorActiveColorVideo: '#dab866',\n    show: true,\n    tabNav: [\n      // {\n      //   title: '教学视频',\n      //   type: 'navigate',\n      //   url: '/coursePage/pageszero/course/course?type=1'\n      // },\n      // {\n      //   title: '线下学习',\n      //   type: 'navigate',\n      //   url: '/offlinePage/pagesnine/courseOffline/courseOffline'\n      // },\n      // {\n      //   title: '问答',\n      //   type: 'navigate',\n      //   url: '/answerPage/pagesthree/answer/answer'\n      // },\n      // {\n      //   title: '教室入驻',\n      //   type: 'navigate',\n      //   url: '/answerPage/pagesthree/answer/answer'\n      // }\n    ]\n\n  },\n  upFormId (e) {\n    app.upFormId(e)\n  },\n  /**\n   * 地址授权\n   * @param e\n   */\n  open_site (e) {\n    console.log('setting')\n    if (e.detail.authSetting['scope.userLocation']) {\n      wx.showToast({\n        title: '授权成功'\n      })\n      this.setData({\n        openType: null\n      })\n      let that = this\n      setTimeout(function () {\n        that.Bmap(that)\n      }, 100)\n    }\n  },\n  choose_site () {\n    console.log('choose')\n    let that = this\n    if (!this.data.openType) {\n      wx.chooseLocation({\n        success (res) {\n          that.setData({\n            address: res.address,\n            latitude: res.latitude,\n            longitude: res.longitude\n          }, that.Bmap(that, `${res.longitude},${res.latitude}`))\n        }\n      })\n    }\n  },\n  /**\n   * 百度地图函数\n   * @param that\n   * @constructor\n   */\n  Bmap (that, site) {\n    // let _this = this\n    let BMap = new bmap.BMapWX({\n      ak: 'RBTsmFCaerZ25VkuGhpSIZa5lyC36BcV'\n    })\n    // BMap.weather({\n    //   fail (data) {\n    //     that.setData({\n    //       openType: 'openSetting'\n    //     })\n    //     console.log('fail', data)\n    //   },\n    //   success (data) {\n    //     let type = (new Date().getHours() > 18 || new Date().getHours() < 6) ? 'nightPictureUrl' : 'dayPictureUrl'\n    //     that.setData({\n    //       weatherInfo: data.originalData.results[0],\n    //       weatherPic: data.originalData.results[0].weather_data[0][type].replace('http://', 'https://')\n    //     })\n    //   },\n    //   location: site || null\n    // }, _this)\n    BMap.regeocoding({\n      location: site || null,\n      success (res) {\n        that.setData({\n          addressInfo: res\n        })\n      },\n      fail (data) {\n        that.setData({\n          openType: 'openSetting'\n        })\n        console.log('fail', data)\n      }\n    })\n  },\n\n  // 秒杀逻辑\n  setKill () {\n    let that = this\n    if (timer) clearInterval(timer)\n    function kill () {\n      let shutDown = 0\n      // console.log(that.data.killArr)\n      if (!that.data.killArr) return\n      for (let [i] of that.data.killArr.entries()) {\n        let nowData = new Date().getTime() // 毫秒数\n        // console.log('startTime', new Date(that.data.killArr[i].startTime))\n        let startTime = that.data.killArr[i].start_time * 1000\n        let endTime = that.data.killArr[i].end_time * 1000\n        // console.log(nowData, startTime, endTime)\n        if (nowData < startTime) { // 未开始\n          that.data.killArr[i].status = 1\n          that.data.killArr[i].h = Math.floor((startTime - nowData) / 3600000)\n          that.data.killArr[i].m = Math.floor((startTime - nowData) % 3600000 / 60000)\n          that.data.killArr[i].s = Math.floor((startTime - nowData) % 60000 / 1000)\n        } else if (nowData > startTime && nowData < endTime) { // 进行中\n          that.data.killArr[i].status = 2\n          that.data.killArr[i].h = Math.floor((endTime - nowData) / 3600000)\n          that.data.killArr[i].m = Math.floor((endTime - nowData) % 3600000 / 60000)\n          that.data.killArr[i].s = Math.floor((endTime - nowData) % 60000 / 1000)\n        } else { // 已结束\n          if (that.data.killArr[i].status === 3) {\n            ++shutDown\n            continue\n          }\n          that.data.killArr[i].status = 3\n          that.data.killArr[i].h = '已'\n          that.data.killArr[i].m = '结'\n          that.data.killArr[i].s = '束'\n        }\n        that.setData({\n          killArr: that.data.killArr\n        })\n      }\n      if (shutDown === that.data.killArr.length) clearInterval(timer)\n    }\n    kill()\n    timer = setInterval(() => {\n      kill()\n    }, 1000)\n  },\n\n  getLocation () {\n    let that = this\n    wx.getLocation({\n      type: 'gcj02',\n      success (res) {\n        that.setData({\n          latitude: res.latitude,\n          longitude: res.longitude\n        })\n        app.su('userLocation', res)\n        that.getIndex()\n      }\n    })\n  },\n\n  MaskGetUserInfo (e) {\n    if (e.detail.iv) {\n      this.setData({\n        needUserInfo: false\n      })\n      app.wxlogin(this.getLocation)\n    }\n  },\n  onReachBottom () {\n  },\n  zan (e) {\n    console.log(e)\n    let that = this\n    app.wxrequest({\n      url: app.getUrl().like,\n      data: {\n        obj_id: e.currentTarget.dataset.id,\n        key: app.gs(),\n        type: 0 // 0：专栏；1：文章；2：回答；3：视频；4：社群；5评论\n      },\n      success (res) {\n        wx.hideLoading()\n        if (res.data.code === 1) {\n          that.data.indexData.columnArr[e.currentTarget.dataset.oindex][e.currentTarget.dataset.index].is_like = that.data.indexData.columnArr[e.currentTarget.dataset.oindex][e.currentTarget.dataset.index].is_like * 1 === 1 ? 0 : 1\n          that.data.indexData.column[(e.currentTarget.dataset.oindex * 4) + (e.currentTarget.dataset.index * 1)].is_like = that.data.indexData.columnArr[e.currentTarget.dataset.oindex][e.currentTarget.dataset.index].is_like\n          that.setData({\n            indexData: that.data.indexData\n          })\n        } else {\n          app.setToast(that, {content: res.data.msg})\n        }\n      }\n    })\n  },\n  goOther (e) {\n    app.goOther(e)\n  },\n\n  getCourse () {\n    let that = this\n    app.wxrequest({\n      url: app.getUrl().course,\n      data: {\n        page: 1\n      },\n      success (res) {\n        wx.hideLoading()\n        if (res.data.status === 200) {\n          let list = []\n          for (let v of res.data.data.lists) {\n            list.push({\n              id: v.id,\n              avatar: v.avatar,\n              image: v.image,\n              room_name: v.room_name,\n              title: v.title,\n              price: v.price > 0 ? v.price : '免费'\n            })\n          }\n          that.setData({\n            list\n          })\n        }\n      }\n    })\n  },\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad (options) {\n    let that = this\n    if (!app.gs() || !app.gs('userInfoAll')) return app.wxlogin()\n    app.getNavTab({\n      style: 3,\n      cb (res) {\n        that.setData({\n          swiperArr: res.data.data\n        })\n        app.getNavTab({\n          style: 2,\n          cb (res) {\n            that.setData({\n              tabNav: res.data.data\n            })\n            that.getCourse()\n          }\n        })\n      }\n    })\n    this.Bmap(this)\n  },\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady () {\n    // console.log(' ---------- onReady ----------')\n  },\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow () {\n    // this.setKill()\n    // console.log(' ---------- onShow ----------')\n  },\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide () {\n    // clearInterval(timer)\n    // console.log(' ---------- onHide ----------')\n  },\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload () {\n    // clearInterval(timer)\n    // console.log(' ---------- onUnload ----------')\n  },\n  onShareAppMessage () {\n    return {\n      title: app.gs('shareText').t || '绣学问，真纹绣',\n      path: `/pages/index/index`,\n      imageUrl: app.gs('shareText').g\n    }\n  },\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh () {\n    this.getCourse()\n    // this.setData({\n    //   page: 0,\n    //   answerArr: []\n    // }, this.getIndexData)\n    // console.log(' ---------- onPullDownRefresh ----------')\n  }\n})\n"]}