{"version":3,"sources":["pages/user/user.js"],"names":["app","getApp","Page","data","testImg","operationArr","upFormId","e","onShareAppMessage","title","gs","path","goStore","is_teach","wx","navigateTo","url","showModal","content","cancelText","confirmText","success","res","confirm","getInfo","that","console","log","id","wxrequest","getUrl","userInfo","user_id","hideLoading","status","su","setData","setToast","desc","err","getUserInfoBtn","detail","iv","wxlogin","getUserOperation","cloud","then","onLoad","onReady","onShow","onHide","onUnload","onPullDownRefresh"],"mappings":";;AAAA;AACA,IAAMA,MAAMC,QAAZ;AACA;AACAC,KAAK;AACH;;;AAGAC,QAAM;AACJC,aAASJ,IAAIG,IAAJ,CAASC,OADd;AAEJC,kBAAc;AAFV,GAJH;AAQHC,UARG,oBAQOC,CARP,EAQU;AACXP,QAAIM,QAAJ,CAAaC,CAAb;AACD,GAVE;AAWHC,mBAXG,+BAWkB;AACnB,WAAO;AACLC,aAAOT,IAAIU,EAAJ,CAAO,WAAP,KAAuB,SADzB;AAELC;AAFK,KAAP;AAID,GAhBE;AAiBHC,SAjBG,qBAiBQ;AACT;AACA;AACA;AACA,QAAIZ,IAAIU,EAAJ,CAAO,aAAP,EAAsBG,QAAtB,IAAkC,CAAtC,EAAyC;AACvCC,SAAGC,UAAH,CAAc;AACZC,aAAK;AADO,OAAd;AAGD,KAJD,MAIO;AACLF,SAAGG,SAAH,CAAa;AACXR,eAAO,OADI;AAEXS,iBAAS,kBAFE;AAGXC,oBAAY,MAHD;AAIXC,qBAAa,MAJF;AAKXC,eALW,mBAKFC,GALE,EAKG;AACZ,cAAIA,IAAIC,OAAR,EAAiB;AACfT,eAAGC,UAAH,CAAc;AACZC,mBAAK;AADO,aAAd;AAGD;AACF;AAXU,OAAb;AAaD;AACF,GAxCE;AAyCHQ,SAzCG,qBAyCQ;AACT,QAAIC,OAAO,IAAX;AACAC,YAAQC,GAAR,CAAY,aAAZ,EAA2B3B,IAAIU,EAAJ,CAAO,aAAP,CAA3B;AACAgB,YAAQC,GAAR,CAAY,gBAAZ,EAA8B3B,IAAIU,EAAJ,CAAO,aAAP,EAAsBkB,EAApD;AACA,QAAI;AACF5B,UAAI6B,SAAJ,CAAc;AACZb,aAAKhB,IAAI8B,MAAJ,GAAaC,QADN;AAEZ5B,cAAM;AACJ6B,mBAAShC,IAAIU,EAAJ,CAAO,aAAP,EAAsBkB;AAD3B,SAFM;AAKZP,eALY,mBAKHC,GALG,EAKE;AACZR,aAAGmB,WAAH;AACA,cAAIX,IAAInB,IAAJ,CAAS+B,MAAT,KAAoB,GAAxB,EAA6B;AAC3BlC,gBAAImC,EAAJ,CAAO,aAAP,EAAsBb,IAAInB,IAAJ,CAASA,IAA/B;AACAsB,iBAAKW,OAAL,CAAa;AACXL,wBAAUT,IAAInB,IAAJ,CAASA;AADR,aAAb;AAGD,WALD,MAKO;AACLH,gBAAIqC,QAAJ,CAAaZ,IAAb,EAAmB,EAACP,SAASI,IAAInB,IAAJ,CAASmC,IAAnB,EAAnB;AACD;AACF;AAfW,OAAd;AAiBD,KAlBD,CAkBE,OAAOC,GAAP,EAAY;AACZb,cAAQC,GAAR,CAAYY,GAAZ;AACD;AACF,GAlEE;AAmEHC,gBAnEG,0BAmEalB,GAnEb,EAmEkB;AACnB,QAAIA,IAAImB,MAAJ,CAAWC,EAAf,EAAmB1C,IAAI2C,OAAJ;AACpB,GArEE;AAsEHC,kBAtEG,8BAsEiB;AAClB,QAAInB,OAAO,IAAX;AACA,QAAIzB,IAAIU,EAAJ,CAAO,cAAP,CAAJ,EAA4B;AAC1B,WAAK0B,OAAL,CAAa;AACX/B,sBAAcL,IAAIU,EAAJ,CAAO,cAAP;AADH,OAAb;AAGD;AACDV,QAAI6C,KAAJ,GAAYD,gBAAZ,GACGE,IADH,CACQ,eAAO;AACXrB,WAAKW,OAAL,CAAa;AACX/B,sBAAciB,IAAIjB;AADP,OAAb;AAGAL,UAAImC,EAAJ,CAAO,cAAP,EAAuBb,IAAIjB,YAA3B;AACD,KANH;AAOD,GApFE;;AAqFH;;;AAGA0C,QAxFG,oBAwFO;AACR,SAAKvB,OAAL;AACA,SAAKoB,gBAAL;AACA;AACD,GA5FE;;;AA8FH;;;AAGAI,SAjGG,qBAiGQ;AACT;AACD,GAnGE;;;AAqGH;;;AAGAC,QAxGG,oBAwGO;AACR;AACA;AACD,GA3GE;;;AA6GH;;;AAGAC,QAhHG,oBAgHO;AACR;AACD,GAlHE;;;AAoHH;;;AAGAC,UAvHG,sBAuHS;AACV;AACD,GAzHE;;;AA2HH;;;AAGAC,mBA9HG,+BA8HkB;AACnB;AACD;AAhIE,CAAL","file":"user.js","sourcesContent":["// 获取全局应用程序实例对象\nconst app = getApp()\n// 创建页面实例对象\nPage({\n  /**\n   * 页面的初始数据\n   */\n  data: {\n    testImg: app.data.testImg,\n    operationArr: []\n  },\n  upFormId (e) {\n    app.upFormId(e)\n  },\n  onShareAppMessage () {\n    return {\n      title: app.gs('shareText') || '绣学问，真纹绣',\n      path: `/pages/index/index`\n    }\n  },\n  goStore () {\n    // wx.navigateTo({\n    //   url: '/storePage/pagesstore/index/index'\n    // })\n    if (app.gs('userInfoAll').is_teach >= 1) {\n      wx.navigateTo({\n        url: '/storePage/pagesstore/index/index'\n      })\n    } else {\n      wx.showModal({\n        title: '未开通教室',\n        content: '亲爱的用户您还没有开通教室权限哦',\n        cancelText: '下次开通',\n        confirmText: '立即开通',\n        success (res) {\n          if (res.confirm) {\n            wx.navigateTo({\n              url: '/enteringPage/pagestwelve/entering/entering'\n            })\n          }\n        }\n      })\n    }\n  },\n  getInfo () {\n    let that = this\n    console.log('userInfoAll', app.gs('userInfoAll'))\n    console.log('userInfoAll.id', app.gs('userInfoAll').id)\n    try {\n      app.wxrequest({\n        url: app.getUrl().userInfo,\n        data: {\n          user_id: app.gs('userInfoAll').id\n        },\n        success (res) {\n          wx.hideLoading()\n          if (res.data.status === 200) {\n            app.su('userInfoAll', res.data.data)\n            that.setData({\n              userInfo: res.data.data\n            })\n          } else {\n            app.setToast(that, {content: res.data.desc})\n          }\n        }\n      })\n    } catch (err) {\n      console.log(err)\n    }\n  },\n  getUserInfoBtn (res) {\n    if (res.detail.iv) app.wxlogin()\n  },\n  getUserOperation () {\n    let that = this\n    if (app.gs('operationArr')) {\n      this.setData({\n        operationArr: app.gs('operationArr')\n      })\n    }\n    app.cloud().getUserOperation()\n      .then(res => {\n        that.setData({\n          operationArr: res.operationArr\n        })\n        app.su('operationArr', res.operationArr)\n      })\n  },\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad () {\n    this.getInfo()\n    this.getUserOperation()\n    // TODO: onLoad\n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady () {\n    // TODO: onReady\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow () {\n    // this.getAllRects()\n    // TODO: onShow\n  },\n\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide () {\n    // TODO: onHide\n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload () {\n    // TODO: onUnload\n  },\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh () {\n    // TODO: onPullDownRefresh\n  }\n})\n"]}