{"version":3,"sources":["pages/user/user.js"],"names":["app","getApp","Page","data","testImg","operationArr","upFormId","e","onShareAppMessage","title","gs","t","path","imageUrl","g","goStore","is_teach","wx","navigateTo","url","showModal","content","cancelText","confirmText","success","res","confirm","getInfo","that","console","log","id","wxrequest","getUrl","userInfo","user_id","hideLoading","status","su","setData","setToast","desc","err","getUserInfoBtn","detail","iv","wxlogin","getUserOperation","cloud","then","onLoad","onReady","onShow","onHide","onUnload","onPullDownRefresh"],"mappings":"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","file":"user.js","sourcesContent":["// 获取全局应用程序实例对象\nconst app = getApp()\n// 创建页面实例对象\nPage({\n  /**\n   * 页面的初始数据\n   */\n  data: {\n    testImg: app.data.testImg,\n    operationArr: []\n  },\n  upFormId (e) {\n    app.upFormId(e)\n  },\n  onShareAppMessage () {\n    return {\n      title: app.gs('shareText').t || '绣学问，真纹绣',\n      path: `/pages/index/index`,\n      imageUrl: app.gs('shareText').g\n    }\n  },\n  goStore () {\n    // wx.navigateTo({\n    //   url: '/storePage/pagesstore/index/index'\n    // })\n    if (app.gs('userInfoAll').is_teach >= 1) {\n      wx.navigateTo({\n        url: '/storePage/pagesstore/index/index'\n      })\n    } else {\n      wx.showModal({\n        title: '未开通教室',\n        content: '亲爱的用户您还没有开通教室权限哦',\n        cancelText: '下次开通',\n        confirmText: '立即开通',\n        success (res) {\n          if (res.confirm) {\n            wx.navigateTo({\n              url: '/enteringPage/pagestwelve/entering/entering'\n            })\n          }\n        }\n      })\n    }\n  },\n  getInfo () {\n    let that = this\n    console.log('userInfoAll', app.gs('userInfoAll'))\n    console.log('userInfoAll.id', app.gs('userInfoAll').id)\n    try {\n      app.wxrequest({\n        url: app.getUrl().userInfo,\n        data: {\n          user_id: app.gs('userInfoAll').id\n        },\n        success (res) {\n          wx.hideLoading()\n          if (res.data.status === 200) {\n            app.su('userInfoAll', res.data.data)\n            that.setData({\n              userInfo: res.data.data\n            })\n          } else {\n            app.setToast(that, {content: res.data.desc})\n          }\n        }\n      })\n    } catch (err) {\n      console.log(err)\n    }\n  },\n  getUserInfoBtn (res) {\n    if (res.detail.iv) app.wxlogin()\n  },\n  getUserOperation () {\n    let that = this\n    if (app.gs('operationArr')) {\n      this.setData({\n        operationArr: app.gs('operationArr')\n      })\n    }\n    app.cloud().getUserOperation()\n      .then(res => {\n        that.setData({\n          operationArr: res.operationArr\n        })\n        app.su('operationArr', res.operationArr)\n      })\n  },\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad () {\n    this.getInfo()\n    this.getUserOperation()\n    // TODO: onLoad\n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady () {\n    // TODO: onReady\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow () {\n    // this.getAllRects()\n    // TODO: onShow\n  },\n\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide () {\n    // TODO: onHide\n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload () {\n    // TODO: onUnload\n  },\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh () {\n    // TODO: onPullDownRefresh\n  }\n})\n"]}