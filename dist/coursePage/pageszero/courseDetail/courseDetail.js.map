{"version":3,"sources":["coursePage/pageszero/courseDetail/courseDetail.js"],"names":["app","getApp","PAGE","CAN_CHANGE","NEED_SHOW","REPLY","MOVE","timer","Page","data","page","swiperIndex","swiperArr","testImg","latitude","longitude","poster","controls","currentIndex","centerHeight","starArr","videoTab","t","commentArr","rIndex","swiperChange","e","setData","detail","current","goComment","writeComment","userChooseAnswer","questionList","currentTarget","dataset","qindex","aindex","videoPlay","play","needSmall","videoEnd","console","log","chooseIndex","setTimeout","options","type","index","getOfflineCourse","scrollToId","id","chooseVideoPlay","videoPlayIndex","showMore","replyFocus","showComment","show_more","noUp","startChoose","starIndex","tagChoose","tagIndex","upStar","setToast","content","that","wxrequest","url","getUrl","courseStar","course_id","user_id","gs","score","success","res","wx","hideLoading","status","detailInfo","star","starOperation","desc","collectO","userCollect","collect","then","collect_count","err","startAnswer","lostTime","clearInterval","answerQuestion","finish","scrollOperation","s","scrollTop","change","touchend","touchmove","toucstart","noneedsmall","scrollUp","replyOperation","replyName","name","cindex","answer_user_id","answer_is_teach","teach","replyBlur","replyConfirm","value","length","courseDiscussSub","evaluate_id","evaluate_user_id","reply_user_id","dis_comment","next","push","reply_nickname","nickname","reply_is_teach","is_teach","answer_nickname","complete","showImg","src","show_image","showImg2","label","buyOperation","navigateTo","price","freight","getScrollInHeight","query","createSelectorQuery","in","selectAll","boundingClientRect","i","v","height","exec","goMapPoint","openLocation","scale","getEvaluate","evaluate","lists","create_time","moment","total","concat","more","pre_page","getMoreNext","courseDiscuss","onScrollUp","onreachbottom","onShareAppMessage","title","path","getDetail","getStoreDetail","getOfflineDetail","courseDetail","navigateBack","collect_base","split","is_collect","setBar","dotDetail","dot_id","class_image","room_images","room_teacher","room_name","getLocation","res2","d","distance","storeDistance","toFixed","activeDetail","active_id","dotRelease","style","writeConfirm","courseEvaluateSub","comment","course_user_id","unshift","avatar_url","star_num","inputValue","onLoad","wxlogin","onReady","onShow","onHide","onUnload","onPullDownRefresh"],"mappings":"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","file":"courseDetail.js","sourcesContent":["// 获取全局应用程序实例对象\nconst app = getApp()\nlet PAGE = 0\nlet CAN_CHANGE = true\nlet NEED_SHOW = [0, 0, 0]\nlet REPLY = false\nlet MOVE = true\nlet timer = null\n// 创建页面实例对象\nPage({\n  /**\n   * 页面的初始数据\n   */\n  data: {\n    page: 0,\n    swiperIndex: 1,\n    swiperArr: [app.data.testImg, app.data.testImg],\n    latitude: 23.111123,\n    longitude: 113.123432,\n    poster: 'https://c.jiangwenqiang.com/api/logo.jpg',\n    controls: true,\n    currentIndex: 0,\n    centerHeight: 63,\n    starArr: ['差', '还行', '中等', '好', '很好'],\n    videoTab: [\n      {\n        t: '详情'\n      },\n      {\n        t: '教室'\n      },\n      {\n        t: '评价'\n      }\n    ],\n    commentArr: [],\n    rIndex: -1\n  },\n  swiperChange (e) {\n    this.setData({\n      swiperIndex: e.detail.current * 1 + 1\n    })\n  },\n\n  goComment () {\n    this.setData({\n      writeComment: !this.data.writeComment\n    })\n  },\n\n  userChooseAnswer (e) {\n    this.data.questionList[e.currentTarget.dataset.qindex]['chooseIndex'] = e.currentTarget.dataset.aindex\n    this.setData({\n      questionList: this.data.questionList\n    })\n  },\n  videoPlay () {\n    this.setData({\n      play: !this.data.play,\n      needSmall: false\n    })\n  },\n  videoEnd () {\n    this.videoPlay()\n    console.log('视频播放结束')\n  },\n  // 导航栏选择操作\n  chooseIndex (e) {\n    CAN_CHANGE = false\n    setTimeout(() => {\n      CAN_CHANGE = true\n    }, 1000)\n    if (this.data.options && this.data.options.type * 1 === 3) {\n      this.setData({\n        currentIndex: e.currentTarget.dataset.index\n      })\n      if (e.currentTarget.dataset.index > 0 && e.currentTarget.dataset.index < 3) {\n        this.data.page = 0\n        this.data.commentArr = []\n        this.getOfflineCourse()\n      }\n    } else {\n      this.setData({\n        currentIndex: e.currentTarget.dataset.index,\n        scrollToId: e.currentTarget.dataset.id\n      })\n    }\n  },\n\n  chooseVideoPlay (e) {\n    this.setData({\n      videoPlayIndex: e.currentTarget.dataset.index\n    })\n  },\n  showMore (e) {\n    if (e.currentTarget.dataset.type === 'comment') {\n      return this.setData({\n        replyFocus: false,\n        showComment: !this.data.showComment\n      })\n    }\n    this.setData({\n      show_more: !this.data.show_more\n    })\n  },\n  noUp () {},\n  startChoose (e) {\n    this.setData({\n      starIndex: e.currentTarget.dataset.index\n    })\n  },\n  tagChoose (e) {\n    this.setData({\n      tagIndex: e.currentTarget.dataset.index\n    })\n  },\n  // 评星\n  upStar () {\n    if (typeof this.data.starIndex === 'undefined') return app.setToast(this, {content: '请选择星星等级'})\n    let that = this\n    app.wxrequest({\n      url: app.getUrl().courseStar,\n      data: {\n        course_id: that.data.options.id,\n        user_id: app.gs('userInfoAll').id,\n        score: that.data.starIndex * 1 + 1\n      },\n      success (res) {\n        wx.hideLoading()\n        if (res.data.status === 200) {\n          that.data.detailInfo.star = that.data.starIndex * 1 + 1\n          that.setData({\n            starOperation: true\n          })\n        } else {\n          app.setToast(that, {content: res.data.desc})\n        }\n      }\n    })\n  },\n  // 点赞\n  collectO () {\n    let that = this\n    let type = that.data.options.type * 1 === 1 ? 1 : (that.data.options.type * 1 === 2 || that.data.options.type * 1 === 4) ? 3 : that.data.options.type * 1 === 3 ? 2 : null\n    app.userCollect(that.data.collect, that.data.options.id, that.data.detailInfo.user_id, type).then(() => {\n      that.data.collect ? --that.data.detailInfo.collect_count : ++that.data.detailInfo.collect_count\n      that.setData({\n        collect: !that.data.collect,\n        detailInfo: that.data.detailInfo\n      })\n    }, err => {\n      console.log(err)\n    })\n  },\n\n  startAnswer (e) {\n    if (e.currentTarget.dataset.type === 'open') this.lostTime(60)\n    else if (e.currentTarget.dataset.type === 'practice') this.lostTime(60)\n    else {\n      if (timer) clearInterval(timer)\n    }\n    this.setData({\n      answerQuestion: !this.data.answerQuestion,\n      finish: e.currentTarget.dataset.type === 'upAnswer' ? 1 : 0\n    })\n  },\n  // scroll滚动监听\n  scrollOperation (e) {\n    // if (this.data.options && this.data.options.type * 1 === 3) return\n    // if (!CAN_CHANGE) return\n    if (this.data.options && this.data.options.type * 1 !== 3) {\n      if (!CAN_CHANGE) return\n      let s = e.detail.scrollTop\n      console.log('s', s)\n      console.log('NEED_SHOW[1]', NEED_SHOW[1])\n      let currentIndex = 0\n      if (s < NEED_SHOW[0]) currentIndex = 0\n      else if (s > NEED_SHOW[0] && s < NEED_SHOW[1]) currentIndex = 1\n      else if (s > NEED_SHOW[1]) currentIndex = 2\n      this.setData({\n        currentIndex\n      })\n    }\n    // let change = e.detail.deltaY\n    let change = 10\n    if (change <= 0) {\n      // 下方隐藏，上方缩小\n      this.setData({\n        needSmall: this.data.play ? 0 : true\n      })\n    }\n  },\n  touchend () {\n    // CAN_CHANGE = false\n  },\n  touchmove () {\n    // console.log('move', e)\n  },\n  toucstart () {\n    // CAN_CHANGE = true\n  },\n  noneedsmall () {\n    this.setData({\n      needSmall: !this.data.needSmall\n    })\n  },\n  scrollUp () {\n    if (MOVE) return\n    CAN_CHANGE = false\n    this.setData({\n      needSmall: false\n    })\n  },\n  // 用户回复操作\n  replyOperation (e) {\n    console.log(e)\n    if (this.data.replyFocus) return\n    if (e.currentTarget.dataset.id === app.gs('userInfoAll').id) return app.setToast(this, {content: '不能回复自己哦'})\n    this.setData({\n      replyName: e.currentTarget.dataset.name,\n      rIndex: e.currentTarget.dataset.cindex,\n      answer_user_id: e.currentTarget.dataset.name === '回复楼主' ? 0 : e.currentTarget.dataset.id || 0,\n      answer_is_teach: e.currentTarget.dataset.teach || 0,\n      replyFocus: true\n    })\n  },\n  // 失焦\n  replyBlur () {\n    setTimeout(() => {\n      this.setData({\n        rIndex: -1,\n        replyFocus: false\n      })\n    }, 200)\n  },\n  // 回复\n  replyConfirm (e) {\n    console.log(e)\n    if (REPLY) return\n    REPLY = true\n    if (!e.detail.value.length) return app.setToast(that, {content: '请输入您的回复内容'})\n    let that = this\n    let index = that.data.rIndex\n    app.wxrequest({\n      url: app.getUrl().courseDiscussSub,\n      data: {\n        evaluate_id: that.data.commentArr[index].evaluate_id,\n        evaluate_user_id: that.data.commentArr[index].user_id,\n        reply_user_id: app.gs('userInfoAll').id,\n        course_id: that.data.detailInfo.id,\n        dis_comment: e.detail.value,\n        answer_user_id: that.data.answer_user_id || ''\n      },\n      success (res) {\n        wx.hideLoading()\n        if (res.data.status === 200) {\n          that.data.commentArr[index].next.push({\n            reply_user_id: app.gs('userInfoAll').id,\n            reply_nickname: app.gs('userInfoAll').nickname || '默认用户',\n            reply_is_teach: app.gs('userInfoAll').is_teach || 0,\n            dis_comment: e.detail.value,\n            answer_nickname: that.data.replyName,\n            answer_user_id: that.data.answer_user_id,\n            answer_is_teach: that.data.answer_is_teach || 0\n          })\n          that.setData({\n            commentArr: that.data.commentArr\n          })\n        } else {\n          app.setToast(that, {content: res.data.desc})\n        }\n      },\n      complete () {\n        REPLY = false\n      }\n    })\n  },\n  // 展示图片\n  showImg (e) {\n    app.showImg(e.currentTarget.dataset.src, e.currentTarget.dataset.type === 'swiper' ? this.data.swiperArr : this.data.detailInfo.show_image)\n  },\n  showImg2 (e) {\n    app.showImg(e.currentTarget.dataset.src, this.data.detailInfo[e.currentTarget.dataset.label])\n  },\n  // 支付操作\n  buyOperation () {\n    // todo 发起支付\n    wx.navigateTo({\n      url: `/offlinePage/pagesnine/offlineApply/offlineApply?id=${this.data.detailInfo.id}&price=${this.data.detailInfo.price}&freight=${this.data.detailInfo.freight}`\n    })\n  },\n  // 获取滚动高度\n  getScrollInHeight () {\n    const query = wx.createSelectorQuery().in(this)\n    query.selectAll('.need-check').boundingClientRect(function (res) {\n      let i = 0\n      for (let v of res) {\n        NEED_SHOW[i] += v.height\n        if (v.id === 's1') {\n          i = 1\n          NEED_SHOW[i] += NEED_SHOW[i - 1]\n        } else if (v.id === 's2') {\n          i = 2\n          NEED_SHOW[i] += NEED_SHOW[i - 1]\n        }\n      }\n    }).exec()\n  },\n\n  goMapPoint (e) {\n    console.log(e.currentTarget.dataset)\n    wx.openLocation({\n      scale: 10,\n      ...(e.currentTarget.dataset)\n    })\n  },\n  // 获取评论\n  getEvaluate () {\n    let that = this\n    app.wxrequest({\n      url: app.getUrl().evaluate,\n      data: {\n        course_id: that.data.options.id,\n        page: ++PAGE\n      },\n      success (res) {\n        wx.hideLoading()\n        if (res.data.status === 200) {\n          for (let v of res.data.data.lists) {\n            v.create_time = app.moment(v.create_time * 1000)\n            v['page'] = 1\n            v['more'] = v.next.length < 10 ? 0 : 1\n          }\n          that.setData({\n            total: res.data.data.total,\n            commentArr: that.data.commentArr.concat(res.data.data.lists),\n            more: res.data.data.pre_page > res.data.data.lists.length ? 0 : 1\n          })\n        } else {\n          app.setToast(that, {content: res.data.desc})\n        }\n      }\n    })\n  },\n  // 获取更多的评论\n  getMoreNext (e) {\n    let that = this\n    app.wxrequest({\n      url: app.getUrl().courseDiscuss,\n      data: {\n        evaluate_id: that.data.commentArr[e.currentTarget.dataset.index].evaluate_id,\n        page: ++e.currentTarget.dataset.page\n      },\n      success (res) {\n        wx.hideLoading()\n        if (res.data.status === 200) {\n          ++that.data.commentArr[e.currentTarget.dataset.index].page\n          that.data.commentArr[e.currentTarget.dataset.index].next = that.data.commentArr[e.currentTarget.dataset.index].next.concat(res.data.data.lists)\n          that.data.commentArr[e.currentTarget.dataset.index].more = res.data.data.lists.length < res.data.data.pre_page ? 0 : 1\n          that.setData({\n            commentArr: that.data.commentArr\n          })\n        } else {\n          app.setToast(that, {content: res.data.desc})\n        }\n      }\n    })\n  },\n  // 评论弹窗触顶\n  onScrollUp () {\n    PAGE = 0\n    this.data.commentArr = []\n    this.getEvaluate()\n  },\n  // 评论弹窗触底\n  onreachbottom () {\n    if (this.data.more >= 1) this.getEvaluate()\n  },\n  // 分享\n  onShareAppMessage () {\n    let that = this\n    return {\n      title: `向您推荐${that.data.detailInfo.title}教学`,\n      path: `/coursePage/pageszero/courseDetail/courseDetail?id=${that.data.options.id}&type=${that.data.options.type}`\n    }\n  },\n  // 获取详情\n  getDetail () {\n    if (this.data.options.type * 1 === 3) return this.getStoreDetail()\n    else if (this.data.options.type * 1 === 2 || this.data.options.type * 1 === 4) return this.getOfflineDetail()\n    let that = this\n    app.wxrequest({\n      url: app.getUrl().courseDetail,\n      data: {\n        course_id: that.data.options.id,\n        user_id: app.gs('userInfoAll').id\n      },\n      success (res) {\n        wx.hideLoading()\n        if (res.data.status === 200) {\n          if (!res.data.data) {\n            app.setToast(that, {content: '内容已被删除'})\n            setTimeout(() => {\n              wx.navigateBack()\n            }, 1000)\n          }\n          res.data.data['collect_count'] >= 0 ? res.data.data.collect_count = res.data.data.collect_count * 1 + res.data.data.collect_base : res.data.data['collect_count'] = 0\n          if (res.data.data.detail) {\n            res.data.data.detail = res.data.data.detail.split(',')\n          }\n          that.setData({\n            collect: res.data.data.is_collect >= 1 ? true : 0,\n            detailInfo: res.data.data\n          }, that.getEvaluate)\n          app.setBar(res.data.data.title)\n        } else {\n          app.setToast(that, {content: res.data.desc})\n        }\n      }\n    })\n  },\n  // 获取门店详情\n  getStoreDetail () {\n    let that = this\n    app.wxrequest({\n      url: app.getUrl().dotDetail,\n      data: {\n        dot_id: that.data.options.id,\n        user_id: app.gs('userInfoAll').id\n      },\n      success (res) {\n        wx.hideLoading()\n        if (res.data.status === 200) {\n          if (!res.data.data) {\n            app.setToast(that, {content: '学堂暂停营业'})\n            setTimeout(() => {\n              wx.navigateBack()\n            }, 1000)\n          }\n          res.data.data['collect_count'] >= 0 ? res.data.data.collect_count = res.data.data.collect_count * 1 + res.data.data.collect_base : res.data.data['collect_count'] = 0\n          res.data.data.class_image = res.data.data.class_image ? res.data.data.class_image.split(',') : []\n          res.data.data.room_images = res.data.data.room_images ? res.data.data.room_images.split(',') : []\n          res.data.data.show_image = res.data.data.show_image ? res.data.data.show_image.split(',') : []\n          res.data.data.room_teacher = res.data.data.room_teacher ? res.data.data.room_teacher.split(',') : []\n          app.setBar(res.data.data.room_name)\n          that.setData({\n            collect: res.data.data.is_collect >= 1 ? true : 0,\n            swiperArr: res.data.data.room_images,\n            detailInfo: res.data.data\n          })\n          wx.getLocation({\n            success (res2) {\n              if (res2.latitude) {\n                let d = app.distance(res2.latitude, res2.longitude, res.data.data.latitude, res.data.data.longitude)\n                that.setData({\n                  storeDistance: d > 1000 ? '离你最近' + (d / 1000).toFixed(2) + 'km' : '离你最近' + d + 'm'\n                })\n              }\n            }\n          })\n        } else {\n          app.setToast(that, {content: res.data.desc})\n        }\n      }\n    })\n  },\n  // 获取线下课程详情\n  getOfflineDetail () {\n    let that = this\n    app.wxrequest({\n      url: app.getUrl().activeDetail,\n      data: {\n        active_id: that.data.options.id,\n        user_id: app.gs('userInfoAll').id\n      },\n      success (res) {\n        wx.hideLoading()\n        if (res.data.status === 200) {\n          if (!res.data.data) {\n            app.setToast(that, {content: '课程已被删除'})\n            setTimeout(() => {\n              wx.navigateBack()\n            }, 1000)\n          }\n          res.data.data['collect_count'] >= 0 ? res.data.data.collect_count = res.data.data.collect_count * 1 + res.data.data.collect_base : res.data.data['collect_count'] = 0\n          res.data.data.show_image = res.data.data.show_image ? res.data.data.show_image.split(',') : []\n          res.data.data.room_images = res.data.data.room_images ? res.data.data.room_images.split(',') : []\n          that.setData({\n            collect: res.data.data.is_collect >= 1 ? true : 0,\n            detailInfo: res.data.data\n          })\n          app.setBar(res.data.data.title)\n        } else {\n          app.setToast(that, {content: res.data.desc})\n        }\n      }\n    })\n  },\n  // 获取驻店课程\n  getOfflineCourse () {\n    let that = this\n    app.wxrequest({\n      url: app.getUrl().dotRelease,\n      data: {\n        user_id: that.data.detailInfo.user_id,\n        style: that.data.currentIndex * 1 === 1 ? 2 : 4,\n        page: ++that.data.page\n      },\n      success (res) {\n        wx.hideLoading()\n        if (res.data.status === 200) {\n          that.setData({\n            commentArr: that.data.commentArr.concat(res.data.data.lists),\n            more: res.data.data.lists.length < res.data.data.pre_page ? 0 : 1\n          })\n        } else {\n          app.setToast(that, {content: res.data.desc})\n        }\n      }\n    })\n  },\n  // 发布直接评论\n  writeConfirm (e) {\n    let that = this\n    if (e.detail.value.content.length <= 4) return app.setToast(that, {content: '评论内容需大于5个字'})\n    app.wxrequest({\n      url: app.getUrl().courseEvaluateSub,\n      data: {\n        course_id: that.data.options.id,\n        user_id: app.gs('userInfoAll').id,\n        comment: e.detail.value.content,\n        course_user_id: that.data.detailInfo.user_id\n      },\n      success (res) {\n        wx.hideLoading()\n        if (res.data.status === 200) {\n          that.data.commentArr.unshift({\n            avatar_url: app.gs('userInfoAll').avatar_url,\n            user_id: app.gs('userInfoAll').id,\n            nickname: app.gs('userInfoAll').nickname,\n            star_num: that.data.detailInfo.star,\n            create_time: '刚刚',\n            next: [],\n            comment: e.detail.value.content\n          })\n          that.setData({\n            inputValue: '',\n            commentArr: that.data.commentArr\n          }, that.goComment)\n        } else {\n          app.setToast(that, {content: res.data.desc})\n        }\n      }\n    })\n  },\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad (options) {\n    if (!app.gs('userInfoAll')) return app.wxlogin()\n    // type 对应规则 1 线上课程 2 线下课程 3 教室\n    this.setData({\n      options\n    }, this.getDetail)\n    if (options.type * 1 === 2 || options.type * 1 === 4) {\n      this.data.videoTab[2].t = '作品秀'\n      this.setData({\n        videoTab: this.data.videoTab\n      })\n    } else if (options.type * 1 === 3) {\n      this.data.videoTab[1].t = '线下课程'\n      this.data.videoTab[2].t = '驻店课程'\n      this.data.videoTab.push({t: '作品秀'})\n      this.setData({\n        videoTab: this.data.videoTab\n      })\n    }\n    // TODO: onLoad\n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady () {\n    this.getScrollInHeight()\n    // TODO: onReady\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow () {\n    // TODO: onShow\n  },\n\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide () {\n    // TODO: onHide\n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload () {\n    PAGE = 0\n    NEED_SHOW[0] = NEED_SHOW[1] = NEED_SHOW[2] = 0\n    // TODO: onUnload\n  },\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh () {\n    // TODO: onPullDownRefresh\n  }\n})\n"]}